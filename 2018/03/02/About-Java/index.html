<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
 
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="java,Thread,SpringBoot," />










<meta name="description" content="用静态工厂方法替代构造器123public static Boolean valueOf(boolean b)&amp;#123;    return b?Boolean.TRUE:Boolean.FALSE;&amp;#125; 1.对于特定参数的构造函数返回的特定对象，能有名字.（而不是用不同参数类型顺序的构造器）2.缓存调用重复对象。实例受控类。客户端就能用==不用equals。3.API隐藏实现类。Col">
<meta name="keywords" content="java,Thread,SpringBoot">
<meta property="og:type" content="article">
<meta property="og:title" content="About Java">
<meta property="og:url" content="http://blog.iotaa.xyz/2018/03/02/About-Java/index.html">
<meta property="og:site_name" content="Learn &amp; practice">
<meta property="og:description" content="用静态工厂方法替代构造器123public static Boolean valueOf(boolean b)&amp;#123;    return b?Boolean.TRUE:Boolean.FALSE;&amp;#125; 1.对于特定参数的构造函数返回的特定对象，能有名字.（而不是用不同参数类型顺序的构造器）2.缓存调用重复对象。实例受控类。客户端就能用==不用equals。3.API隐藏实现类。Col">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/javaref.jpg">
<meta property="og:image" content="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/references.jpg">
<meta property="og:image" content="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/Exceptions.jpg">
<meta property="og:image" content="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/access.jpg">
<meta property="og:image" content="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/finalnoname.jpg">
<meta property="og:image" content="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/refnoname.jpg">
<meta property="og:updated_time" content="2019-02-23T05:14:05.219Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="About Java">
<meta name="twitter:description" content="用静态工厂方法替代构造器123public static Boolean valueOf(boolean b)&amp;#123;    return b?Boolean.TRUE:Boolean.FALSE;&amp;#125; 1.对于特定参数的构造函数返回的特定对象，能有名字.（而不是用不同参数类型顺序的构造器）2.缓存调用重复对象。实例受控类。客户端就能用==不用equals。3.API隐藏实现类。Col">
<meta name="twitter:image" content="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/javaref.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://blog.iotaa.xyz/2018/03/02/About-Java/"/>





  <title>About Java | Learn & practice</title>
  








  <!--prettify代码高亮脚本引入-->

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="top-scroll-bar"></div>
<div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Learn & practice</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.iotaa.xyz/2018/03/02/About-Java/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Learn & practice">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">About Java</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>

              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-02T21:18:51+08:00">
                2018-03-02
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-02-23T13:14:05+08:00">
                2019-02-23
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java源码8-netMVCspring-ioNetty-数据库-并发/" itemprop="url" rel="index">
                    <span itemprop="name">java源码8+netMVCspring+ioNetty+数据库+并发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="用静态工厂方法替代构造器"><a href="#用静态工厂方法替代构造器" class="headerlink" title="用静态工厂方法替代构造器"></a>用静态工厂方法替代构造器</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Boolean <span class="title">valueOf</span><span class="params">(<span class="keyword">boolean</span> b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> b?Boolean.TRUE:Boolean.FALSE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.对于特定参数的构造函数返回的特定对象，能有<em>名字</em>.（而不是用不同参数类型顺序的构造器）<br>2.缓存调用重复对象。实例受控类。客户端就能用==不用equals。<br>3.API隐藏实现类。Collections的集合接口有32个便利实现，不可修改、同步集合等。这些对象的类都是私有类。<code>EnumSet</code> 没有公有构造器，只有静态工厂方法，根据元素大小返回两种类。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;E extends Enum&lt;E&gt;&gt; <span class="function">EnumSet&lt;E&gt; <span class="title">noneOf</span><span class="params">(Class&lt;E&gt; elementType)</span> </span>&#123;</span><br><span class="line">    Enum&lt;?&gt;[] universe = getUniverse(elementType);</span><br><span class="line">    <span class="keyword">if</span> (universe == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ClassCastException(elementType + <span class="string">" not an enum"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (universe.length &lt;= <span class="number">64</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> RegularEnumSet&lt;&gt;(elementType, universe);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> JumboEnumSet&lt;&gt;(elementType, universe);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>服务提供者框架：<br><a href="http://www.importnew.com/27291.html" target="_blank" rel="noopener">http://www.importnew.com/27291.html</a><br>JDBC：<br>服务Service接口：Connection 提供者实现的<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Connection</span>  <span class="keyword">extends</span> <span class="title">Wrapper</span>, <span class="title">AutoCloseable</span> </span>&#123;</span><br><span class="line">    <span class="function">Statement <span class="title">createStatement</span><span class="params">()</span> <span class="keyword">throws</span> SQLException</span>;</span><br><span class="line">    <span class="function">PreparedStatement <span class="title">prepareStatement</span><span class="params">(String sql)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> SQLException</span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">commit</span><span class="params">()</span> <span class="keyword">throws</span> SQLException</span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setAutoCommit</span><span class="params">(<span class="keyword">boolean</span> autoCommit)</span> <span class="keyword">throws</span> SQLException</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>提供者Provider注册API方法 DriverManager.registerDriver</p>
<p>服务访问API方法：DriverManger.get Connection</p>
<p>可选：服务提供者接口:Driver</p>
<p>静态广场方法的管用名：<code>valeOf</code>,<code>of</code>,<code>getInstance</code>, <code>newInstance</code>,<code>getType</code>,<code>newTye</code></p>
<h3 id="多个构造器参数"><a href="#多个构造器参数" class="headerlink" title="多个构造器参数"></a>多个构造器参数</h3><p>重叠构造器：重新1、2、3参数的构造方法，不可行。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NurtitionFacts</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> servingSize; <span class="comment">// require</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> fat;        <span class="comment">//  optional</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> sodium;     <span class="comment">//  optional</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>JavaBeans模式：无参构造器创建对象，然后setter方法。缺点：线程不安全。构造过程分成了几个调用，构造过程中JavaBeans可能不一致，而且不能做成变成不可变对象。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> ser = -<span class="number">1</span>;</span><br><span class="line"><span class="comment">// 不行</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSer</span><span class="params">(<span class="keyword">int</span> ser)</span></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.ser = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Builder模式：</p>
<h3 id="0-1奇偶性"><a href="#0-1奇偶性" class="headerlink" title="0.1奇偶性"></a>0.1奇偶性</h3><p>用==1 判断会有负数的问题，正确写法<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">isOdd</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">    i % <span class="number">2</span> !=<span class="number">0</span>;</span><br><span class="line">    (i &amp; <span class="number">1</span>) != <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="0-3长整除"><a href="#0-3长整除" class="headerlink" title="0.3长整除"></a>0.3长整除</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="keyword">long</span> MICROS_PER_DAY = <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> *<span class="number">1000</span> *<span class="number">1000</span>;</span><br><span class="line"><span class="keyword">final</span> <span class="keyword">long</span> MICROS_PER_DAY3 = <span class="number">24l</span> * <span class="number">60</span> * <span class="number">60</span> *<span class="number">1000</span> *<span class="number">1000</span>;</span><br><span class="line"><span class="keyword">final</span> <span class="keyword">long</span> MICROS_PER_DAY2 = <span class="number">86400000000l</span>;</span><br><span class="line"><span class="keyword">final</span> <span class="keyword">long</span> MILLIS_PER_DAY = <span class="number">24</span>*<span class="number">60</span>*<span class="number">60</span>*<span class="number">1000</span>;</span><br><span class="line">System.out.println(MICROS_PER_DAY/MILLIS_PER_DAY);<span class="comment">//5</span></span><br><span class="line">System.out.println(MICROS_PER_DAY3/MILLIS_PER_DAY);<span class="comment">//1000</span></span><br><span class="line">System.out.println(MICROS_PER_DAY2/MILLIS_PER_DAY);<span class="comment">//1000</span></span><br></pre></td></tr></table></figure>
<p>第一行报错：计算溢出。计算过程完全以int运算执行的，完成运算后才提升到long。</p>
<h3 id="0-4-long字面量-一定要用大写L"><a href="#0-4-long字面量-一定要用大写L" class="headerlink" title="0.4 long字面量 一定要用大写L"></a>0.4 long字面量 一定要用大写L</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(<span class="number">12345</span>+<span class="number">5432l</span>);<span class="comment">//会看成1</span></span><br></pre></td></tr></table></figure>
<h3 id="0-5-十六进制int扩展成long的高位"><a href="#0-5-十六进制int扩展成long的高位" class="headerlink" title="0.5 十六进制int扩展成long的高位"></a>0.5 十六进制int扩展成long的高位</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//cafebabe （第33位丢了）</span></span><br><span class="line">System.out.println(Long.toHexString(<span class="number">0x100000000L</span>+<span class="number">0xcafebabe</span>));</span><br></pre></td></tr></table></figure>
<p>左边是long 右边是32位int，十六进制32位int ，c的高位为1，负数，扩展为补1（F）<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//0xcafebabe被提升成0xffffffffcafebabe 等于十进制数‭-889275714‬</span></span><br><span class="line">System.out.println(Long.toHexString(<span class="number">0xcafebabe</span>));</span><br><span class="line">    <span class="number">1111111</span> </span><br><span class="line">  <span class="number">0xffffffffcafebabeL</span> </span><br><span class="line">+ <span class="number">0x0000000100000000L</span> </span><br><span class="line">--------------------- </span><br><span class="line">  <span class="number">0x00000000cafebabeL</span></span><br></pre></td></tr></table></figure></p>
<p>改正<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(Long.toHexString(<span class="number">0x100000000L</span>+<span class="number">0xcafebabeL</span>));</span><br></pre></td></tr></table></figure></p>
<h3 id="0-6-转型的零扩展和符号位扩展"><a href="#0-6-转型的零扩展和符号位扩展" class="headerlink" title="0.6 转型的零扩展和符号位扩展"></a>0.6 转型的零扩展和符号位扩展</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//65536</span></span><br><span class="line">System.out.println((<span class="keyword">int</span>)(<span class="keyword">char</span>)(<span class="keyword">byte</span>)-<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<p>1 转byte是只取低8位1111 1111 还是-1，<br>2 byte-&gt;（符号扩展）char是无符号16位 扩展成16个1<br>3 char扩展都是零扩展 就是16个1 65536<br>没有符号位扩展：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i = c &amp; <span class="number">0xffff</span>;</span><br></pre></td></tr></table></figure></p>
<p>如果byte转char不希望符号位扩展<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> c = (<span class="keyword">char</span>) (b &amp; <span class="number">0xff</span>);</span><br></pre></td></tr></table></figure></p>
<h3 id="0-7"><a href="#0-7" class="headerlink" title="0.7"></a>0.7</h3><h3 id="创建泛型数组"><a href="#创建泛型数组" class="headerlink" title="创建泛型数组"></a>创建泛型数组</h3><p>从List分<code>ArrayList</code>和<code>LinkedList</code>根据结构，根据元素的类型又可以分<code>String/Int</code>的ArrayList，乘法组合数量太多。</p>
<p><code>(E[]) new Object[n];</code></p>
<p>E 到底是什么属于对象的一部分 不是类的一部分<br><code>new Node&lt;Integer&gt;(value);</code></p>
<h3 id="toArray-new-String-0"><a href="#toArray-new-String-0" class="headerlink" title="toArray(new String[0])"></a><code>toArray(new String[0])</code></h3><p>官方推荐写法<br><a href="https://docs.oracle.com/javase/tutorial/collections/interfaces/collection.html" target="_blank" rel="noopener">https://docs.oracle.com/javase/tutorial/collections/interfaces/collection.html</a><br>Otherwise, a new array is allocated with the runtime type of the specified array and the size of this list.<br>如果指定的数组能容纳该 collection，则返回包含此 collection 元素的数组。否则，将根据指定数组的运行时类型和此 collection 的大小分配一个新数组。这里给的参数的数组长度是0，因此就会返回包含此 collection 中所有元素的数组，并且返回数组的类型与指定数组的运行时类型相同。</p>
<h3 id="BinarySearch"><a href="#BinarySearch" class="headerlink" title="BinarySearch"></a>BinarySearch</h3><p><code>Arrays.binarySearch()</code> method returns index of the search key, if it is contained in the array,<br>else it returns (-(insertion point) - 1).</p>
<h3 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h3><ul>
<li>Java中除了static方法和final方法（private方法本质上属于final方法，因为不能被子类访问）之外，其它所有的方法都是动态绑定</li>
<li>构造函数并不具有多态性，它们实际上是static方法，只不过该static声明是隐式的。因此，构造函数不能够被override。</li>
<li>在父类构造函数内部调用具有多态行为的函数将导致无法预测的结果，因为此时子类对象还没初始化，此时调用子类方法不会得到我们想要的结果。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Glyph</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Glyph.draw()"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    Glyph() &#123;</span><br><span class="line">        System.out.println(<span class="string">"Glyph() before draw()"</span>);</span><br><span class="line">        draw();</span><br><span class="line">        System.out.println(<span class="string">"Glyph() after draw()"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RoundGlyph</span> <span class="keyword">extends</span> <span class="title">Glyph</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> radius = <span class="number">1</span>;</span><br><span class="line">    RoundGlyph(<span class="keyword">int</span> r) &#123;</span><br><span class="line">        radius = r;</span><br><span class="line">        System.out.println(<span class="string">"RoundGlyph.RoundGlyph(). radius = "</span> + radius);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"RoundGlyph.draw(). radius = "</span> + radius);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PolyConstructors</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> RoundGlyph(<span class="number">5</span>); &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>输出：<br><div class="note "><p>Glyph() before draw()<br>RoundGlyph.draw(). radius = 0<br>Glyph() after draw()<br>RoundGlyph.RoundGlyph(). radius = 5</p></div></p>
<h3 id="序列化字段"><a href="#序列化字段" class="headerlink" title="序列化字段"></a>序列化字段</h3><p>静态变量不管是否被transient修饰，均不能被序列化</p>
<p>Java中，对象的序列化可以通过实现两种接口来实现，若实现的是Serializable接口，则所有的序列化将会自动进行，若实现的是Externalizable接口，则没有任何东西可以自动序列化，需要在writeExternal方法中进行手工指定所要序列化的变量，这与是否被transient修饰无关。</p>
<p>Shape和Circle两个类的定义。在序列化一个Circle的对象circle到文件时，下面哪个字段会被保存到文件中？ (  )<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">       <span class="keyword">public</span> String name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span> <span class="keyword">extends</span> <span class="title">Shape</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line">       <span class="keyword">private</span> <span class="keyword">float</span> radius;</span><br><span class="line">       <span class="keyword">transient</span> <span class="keyword">int</span> color;</span><br><span class="line">       <span class="keyword">public</span> <span class="keyword">static</span> String type = <span class="string">"Circle"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<div class="note "><p>A name<br>B radius<br>C color<br>D type<br>答案：B</p></div>
<h3 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">int</span> constInt = <span class="number">5</span>;</span><br><span class="line">     <span class="comment">//add code here</span></span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div class="note "><p>A public abstract void method(int a);<br>B constInt = constInt + 5;</p>
<ul>
<li>变量可以初始化或不初始化但不能初始化后在抽象类中重新赋值或操作该变量（只能在子类中改变该变量）。</li>
</ul>
<p>C public int method();</p>
<ul>
<li>普通方法一定要实现</li>
</ul>
<p>D public abstract void anotherMethod() {} </p>
<ul>
<li>抽象类中的抽象方法（加了abstract关键字的方法）不能实现。</li>
</ul>
<p>答案：A</p></div>
<p>接口中定义的变量默认是public static final 型，且必须给其初值，所以实现类中不能重新定义，也不能改变其值。抽象类中的变量默认是 friendly 型，其值可以在子类中重新定义，也可以在子类中重新赋值。</p>
<h3 id="静态块构造块"><a href="#静态块构造块" class="headerlink" title="静态块构造块"></a>静态块构造块</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HelloA</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HelloA</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"HelloA"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    &#123; System.out.println(<span class="string">"I'm A class"</span>); &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> &#123; System.out.println(<span class="string">"static A"</span>); &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloB</span> <span class="keyword">extends</span> <span class="title">HelloA</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HelloB</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"HelloB"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    &#123; System.out.println(<span class="string">"I'm B class"</span>); &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> &#123; System.out.println(<span class="string">"static B"</span>); &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123; </span><br><span class="line">　　　　 <span class="keyword">new</span> HelloB(); </span><br><span class="line">　　 &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div class="note "><p>static A<br>static B<br>I’m A class<br>HelloA<br>I’m B class<br>HelloB</p></div>
<p>对象的初始化顺序：<br>（1）类加载之后，按从上到下（从父类到子类）执行被static修饰的语句；<br>（2）当static语句执行完之后,再执行main方法；<br>（3）如果有语句new了自身的对象，将从上到下执行构造代码块、构造器。</p>
<hr>
<h3 id="IO用法"><a href="#IO用法" class="headerlink" title="IO用法"></a>IO用法</h3><p>要从文件”file.dat”中读出第10个字节到变量c中,下列哪个方法适合? （）<br>A <code>FileInputStream in=new FileInputStream(&quot;file.dat&quot;); in.skip(9); int c=in.read();</code></p>
<p>B <code>FileInputStream in=new FileInputStream(&quot;file.dat&quot;); in.skip(10); int c=in.read();</code></p>
<p>C <code>FileInputStream in=new FileInputStream(&quot;file.dat&quot;); int c=in.read();</code></p>
<p>D <code>RandomAccessFile in=new RandomAccessFile(&quot;file.dat&quot;); in.skip(9); int c=in.readByte();</code></p>
<p>D语法错 应该<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RandomAccessFile in = <span class="keyword">new</span> RandomAccessFile(<span class="string">"file.dat"</span>, <span class="string">"r"</span>);</span><br><span class="line">in.skipBytes(<span class="number">9</span>);</span><br><span class="line"><span class="keyword">int</span> c = in.readByte();</span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="case-没有break"><a href="#case-没有break" class="headerlink" title="case 没有break"></a>case 没有break</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getValue</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> result = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">switch</span> (i) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            result = result + i;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            result = result + i * <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">            result = result + i * <span class="number">3</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>A0                    B2                    C4                     D10</p>
<p>答案：D</p>
<p>解析：注意这里case后面没有加break，所以从case 2开始一直往下运行。</p>
<hr>
<h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">foo</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span> <span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        String s;</span><br><span class="line">        System.out.println(<span class="string">"s="</span> + s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>A 代码得到编译，并输出“s=”<br>B 代码得到编译，并输出“s=null”<br>C 由于String s没有初始化，代码不能编译通过<br>D 代码得到编译，但捕获到 NullPointException异常<br>答案：C<br>解析：Java中所有定义的基本类型或对象都必须初始化才能输出值。</p>
<hr>
<h3 id="引用和值传递"><a href="#引用和值传递" class="headerlink" title="引用和值传递"></a>引用和值传递</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Example</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    String str = <span class="keyword">new</span> String(<span class="string">"good"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span>[] ch = &#123; <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Example ex = <span class="keyword">new</span> Example();</span><br><span class="line"></span><br><span class="line">        ex.change(ex.str, ex.ch);</span><br><span class="line"></span><br><span class="line">        System.out.print(ex.str + <span class="string">" and "</span>);</span><br><span class="line"></span><br><span class="line">        System.out.print(ex.ch);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">change</span><span class="params">(String str, <span class="keyword">char</span> ch[])</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        str = <span class="string">"test ok"</span>;</span><br><span class="line"></span><br><span class="line">        ch[<span class="number">0</span>] = <span class="string">'g'</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>A、 good and abc</p>
<p>B、 good and gbc</p>
<p>C、 test ok and abc</p>
<p>D、 test ok and gbc<br>答案：B</p>
<hr>
<h3 id="创建对象"><a href="#创建对象" class="headerlink" title="创建对象"></a>创建对象</h3><ol>
<li>不通过构造函数也能创建对象吗（）</li>
</ol>
<p>A 是     B 否</p>
<p>答案：A</p>
<p>解析：Java创建对象的几种方式（重要）：</p>
<p>(1) 用new语句创建对象，这是最常见的创建对象的方法。<br>(2) 运用反射手段,调用java.lang.Class或者java.lang.reflect.Constructor类的newInstance()实例方法。<br>(3) 调用对象的clone()方法。<br>(4) 运用反序列化手段，调用java.io.ObjectInputStream对象的 readObject()方法。</p>
<p>(1)和(2)都会明确的显式的调用构造函数 ；(3)是在内存上对已有对象的影印，所以不会调用构造函数 ；(4)是从文件中还原类的对象，也不会调用构造函数。</p>
<hr>
<p>我们知道 Java 已经支持所谓的可变参数（varargs），但是官方类库还是提供了一系列特定参数长度的方法，看起来似乎非常不优雅，为什么呢？<br>这其实是为了最优的性能，JVM在处理变长参数的时候会有明显的额外开销，如果你需要实现性能敏感的 API，也可以进行参考。</p>
<h3 id="反编译"><a href="#反编译" class="headerlink" title="反编译"></a>反编译</h3><p><code>javap -v xx.class</code></p>
<hr>
<p>以下说法中正确的有<br>正确答案: A D   你的答案: A B D (错误)<br>A.StringBuilder是线程不安全的<br>B.HashMap中，使用 get(key)==null可以判断这个HashMap是否包含这个key(key存在，值是null)<br>C.Java类可以同时用abstract和final声明<br>D.volatile关键字不保证对变量操作的原子性</p>
<hr>
<p>Java 中堆和栈有什么区别?<br>正确答案: A B   你的答案: A B D (错误)<br>A.堆是整个JVM共享的<br>B.栈是每个线程独有的<br>C.栈是整个JVM共享的<br>D.对象可以分配在堆上也可以分配在栈上</p>
<h3 id="PermGen-Space"><a href="#PermGen-Space" class="headerlink" title="PermGen Space"></a>PermGen Space</h3><p><code>-XX:PermSize</code>，表示程序启动时，JVM 方法区的初始化最小尺寸参数；<br><code>-XX:MaxPermSize</code>，表示程序启动时，JVM 方法区的初始化最大尺寸参数。</p>
<p>Java 8中，永久代被彻底移除，取而代之的是另一块与堆不相连的本地内存——元空间（Metaspace）,‑XX:MaxPermSize 参数失去了意义，取而代之的是-XX:MaxMetaspaceSize。</p>
<p>方法区（method area）只是JVM规范中定义的一个概念，用于存储类信息、常量池、静态变量、JIT编译后的代码等数据，具体放在哪里，不同的实现可以放在不同的地方。而永久代是Hotspot虚拟机特有的概念，是方法区的一种实现，别的JVM都没有这个东西。</p>
<p>内存溢出错误。更具体的说，是指方法区（永久代）内存溢出！<br>java.lang.OutOfMemoryError: PermGen Space表示<br>正确答案: C   你的答案: A (错误)<br>Java heap内存已经用完<br>Java 堆外内存已经用完<br>Java 类对象(class)存储区域已经用完<br>Java 栈空间已经用完</p>
<h3 id="强引用、软引用、弱引用、幻象引用"><a href="#强引用、软引用、弱引用、幻象引用" class="headerlink" title="强引用、软引用、弱引用、幻象引用"></a>强引用、软引用、弱引用、幻象引用</h3><p><img src="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/javaref.jpg" alt="javaref.jpg"></p>
<p><img src="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/references.jpg" alt="references.jpg"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Reference</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns this reference object's referent.  If this reference object has</span></span><br><span class="line"><span class="comment">     * been cleared, either by the program or by the garbage collector, then</span></span><br><span class="line"><span class="comment">     * this method returns &lt;code&gt;null&lt;/code&gt;.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>   The object to which this reference refers, or</span></span><br><span class="line"><span class="comment">     *           &lt;code&gt;null&lt;/code&gt; if this reference object has been cleared</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">get</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.referent;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于软引用、弱引用之类，垃圾收集器可能会存在二次确认的问题，以保证处于弱引用状<br>态的对象，没有改变为强引用。</p>
<p>如果我们错误的保持了强引用（比如，赋值给了 static 变量），那么对象可能就没有机<br>会变回类似弱引用的可达性状态了，就会产生内存泄漏。</p>
<p>幻象引用（因为 get 永远返回 null），如果对象还没有被销毁，都可以通过 get 方法获取<br>原有对象。这意味着，利用软引用和弱引用，我们可以将访问到的对象，重新指向强引用，也就<br>是人为的改变了对象的可达性状态</p>
<h4 id="SoftReference-软引用，缓存，配合引用队列"><a href="#SoftReference-软引用，缓存，配合引用队列" class="headerlink" title="SoftReference:软引用，缓存，配合引用队列"></a>SoftReference:软引用，缓存，配合引用队列</h4><p>让对象豁免一些垃圾收集，只有当 JVM 认为【内存不足】时，才会去试图回收软引用指向的对象。<br>are cleared at the discretion（斟酌） of the garbage collector in response to memory demand.<br>软引用<strong>通常用来实现内存敏感的缓存</strong>，如果还有空闲内存，就可以暂时保留缓存，当内存不足时清理掉，这样就保证了使用缓存的同时，不会耗尽内存。<br>Soft references are most often used to implement memory-sensitive caches.</p>
<h4 id="WeakReference：弱引用，配合引用队列"><a href="#WeakReference：弱引用，配合引用队列" class="headerlink" title="WeakReference：弱引用，配合引用队列"></a>WeakReference：弱引用，配合引用队列</h4><p>每次垃圾回收都回收掉。<br>下面关于Java中weak reference的说法，哪个是正确的?<br>正确答案: B   你的答案: B (正确)<br>Weak reference指向的对象不会被GC回收。<br>Weak reference指向的对象可以被GC回收。<br>Weak reference 指向的对象肯定会被GC回收<br>Weak reference 指向的对象如果被回收，那么weak reference会收到通知</p>
<p>维护一种非强制性的映射关系，如果试图获取时对象还在，就使用它，否则重现实例化。它同样是很多缓存实现的选择。<br>Weak references are most often used to implement canonicalizing mappings</p>
<h4 id="幻象引用Phantom-：虚引用，GC的哨兵，必须和引用队列一起用"><a href="#幻象引用Phantom-：虚引用，GC的哨兵，必须和引用队列一起用" class="headerlink" title="幻象引用Phantom ：虚引用，GC的哨兵，必须和引用队列一起用"></a>幻象引用Phantom ：虚引用，GC的哨兵，必须和引用队列一起用</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String str = <span class="keyword">new</span> String(<span class="string">"abc"</span>);</span><br><span class="line">ReferenceQueue queue = <span class="keyword">new</span> ReferenceQueue();</span><br><span class="line">PhantomReference ref = <span class="keyword">new</span> PhantomReference(str,queue);</span><br></pre></td></tr></table></figure>
<p>幻象引用，有时候也翻译成虚引用，你不能通过它访问对象。幻象引用仅仅是提供了一种确<br>保对象被 finalize 以后，做某些事情的机制</p>
<h3 id="引用队列-ReferenceQueue"><a href="#引用队列-ReferenceQueue" class="headerlink" title="引用队列 ReferenceQueue"></a>引用队列 ReferenceQueue</h3><p>是链表，就是头节点<code>private volatile Reference&lt;? extends T&gt; head = null;</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">volatile</span> ReferenceQueue&lt;? <span class="keyword">super</span> T&gt; queue;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* When active:   NULL</span></span><br><span class="line"><span class="comment">     *     pending:   this</span></span><br><span class="line"><span class="comment">     *    Enqueued:   next reference in queue (or this if last)</span></span><br><span class="line"><span class="comment">     *    Inactive:   this</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">"rawtypes"</span>)</span><br><span class="line">Reference next;</span><br></pre></td></tr></table></figure></p>
<p>创建各种引用并关联到响应对象时，可以选择是否需要关联引用队列，JVM 会在特定时机将引用 enqueue 到队列里。<br>幻象引用，get 方法只返回 null，如果再不指定引用队列，基本就没有意义了。</p>
<h3 id="final、finally、-finalize"><a href="#final、finally、-finalize" class="headerlink" title="final、finally、 finalize"></a>final、finally、 finalize</h3><h4 id="final"><a href="#final" class="headerlink" title="final"></a>final</h4><p>final 修饰的 class 代表不可以继承扩展.避免 API 使用者更改基础功能<br>final 的变量是不可以修改的.，利用final 可能有助于 JVM 将方法进行内联(现代高性能 JVM（如 HotSpot）判断内联未必依赖final 的提示)，可以改善编译器进行条件编译的能力.<br>final 的方法也是不可以重写的（override）</p>
<p>一个类的private方法会被隐式声明为final方法。</p>
<h5 id="final-并不等同于-immutable"><a href="#final-并不等同于-immutable" class="headerlink" title="final 并不等同于 immutable"></a>final 并不等同于 immutable</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> List&lt;String&gt; strList = <span class="keyword">new</span> ArrayList&lt;&gt;(); </span><br><span class="line">strList.add(<span class="string">"Hello"</span>); </span><br><span class="line">strList.add(<span class="string">"world"</span>);   </span><br><span class="line"><span class="comment">//List.of 方法创建的本身就是不可变 List，会抛运行异常</span></span><br><span class="line">List&lt;String&gt; unmodifiableStrList = List.of(<span class="string">"hello"</span>, <span class="string">"world"</span>); </span><br><span class="line">unmodifiableStrList.add(<span class="string">"again"</span>);</span><br></pre></td></tr></table></figure>
<h4 id="finalize"><a href="#finalize" class="headerlink" title="finalize"></a><code>finalize</code></h4><p>finalize 是基础类 java.lang.Object 的一个方法.保证对象在被垃圾收集前完成<br>特定资源的回收. JDK 9 开始被标记为deprecated.</p>
<p>无法保证 finalize 什么时候执行，执行的是否符合预期。使用不当会影响<br>性能，导致程序死锁、挂起等。</p>
<p>跟c++的析构函数不同，垃圾回收要标记两次垃圾回收才回收 ，没引用的对象被放到F-Queue队列中</p>
<p>可以用于对象重生<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Finalization</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Finalization finalization;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">finalize</span><span class="params">()</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Finalize"</span>);</span><br><span class="line">        finalization = <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Finalization f = <span class="keyword">new</span> Finalization();</span><br><span class="line">        System.out.println(<span class="string">"初始化完成："</span> + f);</span><br><span class="line">        f = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">// 会触发finalize()</span></span><br><span class="line">        System.gc();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 为了等垃圾回收线程完成 执行到finalization = this;</span></span><br><span class="line">            Thread.currentThread().sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"完成GC："</span>+f);</span><br><span class="line">        System.out.println(finalization);</span><br><span class="line">        System.out.println(f+<span class="string">" "</span>+finalization);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="post-mortem"><a href="#post-mortem" class="headerlink" title="post-mortem"></a>post-mortem</h4><p>Java 平台目前在逐步使用 java.lang.ref.Cleaner 来替换掉原有的 finalize 实现。<br>Cleaner 的实现利用了幻象引用（Phantom Reference），这是一种常见的所谓 post-mortem 清理机制。</p>
<p>每个 Cleaner 的操作都是独立的，它有自己的运行线程，所以可以避免意外死锁等问题。</p>
<p>为自己的模块构建一个 Cleaner，然后实现相应的清理逻辑</p>
<h4 id="幻象引用定制资源收集"><a href="#幻象引用定制资源收集" class="headerlink" title="幻象引用定制资源收集"></a>幻象引用定制资源收集</h4><p>MySQL JDBC driver 之一的 ysql-connector-j，就利用了幻象引用机制。<br>幻象引用也可以进行类似链条式依赖关系的动作，比如，进行总量控制的场景，保证只有连接被关闭，相应资源被回收，连接池才能创建新的连接。</p>
<p>代码如果稍有不慎添加了对资源的强引用关系，就会导致循环引用关系，前面提到的<br>MySQL JDBC 就在特定模式下有这种问题，导致内存泄漏。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CleaningExample</span> <span class="keyword">implements</span> <span class="title">AutoCloseable</span> </span>&#123; </span><br><span class="line">    <span class="comment">// A cleaner, preferably one shared within a library </span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Cleaner cleaner = &lt;cleaner&gt;; </span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">State</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;  </span><br><span class="line">        State(...) &#123; </span><br><span class="line">            <span class="comment">// initialize State needed for cleaning action </span></span><br><span class="line">     &#125; </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123; </span><br><span class="line">            <span class="comment">// cleanup action accessing State, executed at most once </span></span><br><span class="line">        &#125; </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> State; </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Cleaner.Cleanable cleanable </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CleaningExample</span><span class="params">()</span> </span>&#123; </span><br><span class="line">        <span class="keyword">this</span>.state = <span class="keyword">new</span> State(...); </span><br><span class="line">        <span class="keyword">this</span>.cleanable = cleaner.register(<span class="keyword">this</span>, state); </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> </span>&#123; </span><br><span class="line">        cleanable.clean(); </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面的示例代码中，将 State 定义<br>为 static，就是为了避免普通的内部类隐含着对外部对象的强引用，因为那样会使外部对象无法<br>进入幻象可达的状态。</p>
<h4 id="finally不会被执行的特例"><a href="#finally不会被执行的特例" class="headerlink" title="finally不会被执行的特例"></a>finally不会被执行的特例</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123; </span><br><span class="line">  <span class="comment">// do something </span></span><br><span class="line">  System.exit(<span class="number">1</span>); </span><br><span class="line">&#125; <span class="keyword">finally</span>&#123; </span><br><span class="line">  System.out.println(“Print from <span class="keyword">finally</span>”); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Exception-Error-运行时异常"><a href="#Exception-Error-运行时异常" class="headerlink" title="Exception Error 运行时异常"></a><code>Exception</code> <code>Error</code> 运行时异常</h3><p><img src="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/Exceptions.jpg" alt="Exceptions.jpg"></p>
<p>尽量不要捕获类似 <code>Exception</code> 这样的通用异常,<code>Thread.sleep()</code> 应该抛出<code>InterruptedException</code></p>
<p><code>Exception</code> 和 <code>Error</code> 都 继承<code>Throwable</code></p>
<h4 id="Throwable"><a href="#Throwable" class="headerlink" title="Throwable"></a>Throwable</h4><p>Throwable类型的实例才可以被抛出（throw）或者捕获（catch），它是异常处理机制的基本组成类型。<br>Only objects that are instances of this（<code>Throwable</code>) class (or one of its subclasses) are thrown by the <strong>Java Virtual Machine
</strong> or can be thrown by the Java throw statement.</p>
<p>only this class or one of its subclasses can be the argument type in a <strong>catch</strong> clause. </p>
<h4 id="已检查的异常"><a href="#已检查的异常" class="headerlink" title="已检查的异常"></a>已检查的异常</h4><p>Throwable and any subclass of Throwable that is not also a subclass of either RuntimeException or Error are regarded as <strong>checked exceptions</strong>.<br>checked exceptions 可检查异常应该捕获<br>不检查异常（运行时异常）：<code>NullPointerException</code> <code>ArrayIndexOutOfBoundsException</code></p>
<p>Java 语言的 Checked Exception 也许是个设计错误:</p>
<ol>
<li>Checked Exception 的假设是我们捕获了异常，然后恢复程序。但是，其实我们大多数情况<br>下，根本就不可能恢复。Checked Exception 的使用，已经大大偏离了最初的设计目的。</li>
<li>Checked Exception 不兼容 functional 编程，如果你写过 Lambda/Stream 代码，相信深<br>有体会。</li>
</ol>
<h4 id="异常-Exception-和-Error"><a href="#异常-Exception-和-Error" class="headerlink" title="异常 Exception 和 Error"></a>异常 Exception 和 Error</h4><p>Java 每实例化一个 Exception，都会对当时的栈进行快照，这是一个相对比较重的操作<br>A throwable contains a snapshot of the execution stack of its thread at the time it was created.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Throwable</span></span></span><br><span class="line"><span class="class">/**</span></span><br><span class="line"><span class="class"> * <span class="title">Native</span> <span class="title">code</span> <span class="title">saves</span> <span class="title">some</span> <span class="title">indication</span> <span class="title">of</span> <span class="title">the</span> <span class="title">stack</span> <span class="title">backtrace</span> <span class="title">in</span> <span class="title">this</span> <span class="title">slot</span>.</span></span><br><span class="line"><span class="class"> */</span></span><br><span class="line"><span class="class"><span class="title">private</span> <span class="title">transient</span> <span class="title">Object</span> <span class="title">backtrace</span></span>;</span><br></pre></td></tr></table></figure></p>
<p>Error 不需要捕获<code>OutOfMemoryError</code></p>
<h4 id="chained-exception-facility-wrapped-exception"><a href="#chained-exception-facility-wrapped-exception" class="headerlink" title="chained exception facility wrapped exception"></a>chained exception facility wrapped exception</h4><p>让下层抛出的抛出物向外传播是不好的设计，因为它通常与上层提供的抽象无关。</p>
<h4 id="反应式编程（Reactive-Stream）"><a href="#反应式编程（Reactive-Stream）" class="headerlink" title="反应式编程（Reactive Stream）"></a>反应式编程（Reactive Stream）</h4><p>因为其本身是异步、基于事件机制的，所以出现异常情况，决不能简单抛出去；另外，由于代码<br>堆栈不再是同步调用那种垂直的结构，这里的异常处理和日志需要更加小心，我们看到的往往是<br>特定 executor 的堆栈，而不是业务方法调用关系。</p>
<hr>
<h3 id="生成闭区间-0-1-浮点数"><a href="#生成闭区间-0-1-浮点数" class="headerlink" title="生成闭区间[0,1]浮点数?"></a>生成闭区间<code>[0,1]</code>浮点数?</h3><h3 id="Maven-目录隔离"><a href="#Maven-目录隔离" class="headerlink" title="Maven 目录隔离"></a>Maven 目录隔离</h3><h3 id="Lombok：通过注解精简代码"><a href="#Lombok：通过注解精简代码" class="headerlink" title="Lombok：通过注解精简代码"></a>Lombok：通过注解精简代码</h3><p><a href="https://projectlombok.org/" target="_blank" rel="noopener">https://projectlombok.org/</a><br>Lombok会把javac编译的AST放到Lombok Processor交给不同的Handler处理，输出修改AST，javac继续解析生成字节码文件。<br>关键注解 of是白名单 exclude黑名单<br><code>@Data(包括get/set/toString/EqualsAndHashCode) @Getter @Setter</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@EqualsAndHashCode</span>(of = <span class="string">"id"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Category</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer parentId;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Boolean status;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer sortOrder;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Date updateTime;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>@NoArgsConstructor</code>无参构造器<br><code>@AllArgsConstructor</code>无参构造器<br><code>@ToString(exclude = &quot;column&quot;)</code><br><code>@EqualsAndHashCode(exclude = &quot;column&quot;)</code><br><code>@Sl4j @Log4j</code></p>
<h3 id="java-反编译"><a href="#java-反编译" class="headerlink" title="java 反编译"></a>java 反编译</h3><p><a href="http://jd.benow.ca/" target="_blank" rel="noopener">http://jd.benow.ca/</a></p>
<p>RESTful API 设计参考文献列表<br><a href="https://github.com/aisuhua/restful-api-design-references" target="_blank" rel="noopener">https://github.com/aisuhua/restful-api-design-references</a></p>
<h3 id="ajax复杂对象传递给spring-boot"><a href="#ajax复杂对象传递给spring-boot" class="headerlink" title="ajax复杂对象传递给spring boot"></a>ajax复杂对象传递给spring boot</h3><p>ajax里必须要<code>contentType:&quot;application/json;charset=utf-8&quot;</code>因为默认是<code>application/x-www-form-urlencoded</code></p>
<h3 id="Gson类中有泛型类的反射原理"><a href="#Gson类中有泛型类的反射原理" class="headerlink" title="Gson类中有泛型类的反射原理"></a>Gson类中有泛型类的反射原理</h3><h3 id="JavaEE规范"><a href="#JavaEE规范" class="headerlink" title="JavaEE规范"></a>JavaEE规范</h3><h3 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h3><h4 id="里氏替换-长方形和正方形"><a href="#里氏替换-长方形和正方形" class="headerlink" title="里氏替换 长方形和正方形"></a>里氏替换 长方形和正方形</h4><p>当把父类替换成子类，程序运行的和期望不一样。<br>如果正方形继承长方形，当对长方形的resize方法里有一个判断长宽是否相等的条件，正方形会死循环。<br>正确方法：长方形正方形都实现这个接口。注意没有set方法，所以长方形和正方形的resize是不通用的。写resize方法只能传入长方形类。防止继承泛滥。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Quadrangle</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">long</span> <span class="title">getWidth</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">long</span> <span class="title">getLength</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>子类重载父类方法，入参要比父类的入参更宽松！<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Child</span> <span class="keyword">extends</span> <span class="title">Base</span></span>&#123;</span><br><span class="line">    <span class="comment">// 重写</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">(HashMap map)</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.method(map);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 重载 比父类的入参更宽松 </span></span><br><span class="line">    <span class="comment">// 当使用Child.method(hashmap);的时候不会被调用</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">(Map map)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>后置条件：子类实现父类的抽象方法返回值要比父类更严格</p>
<h4 id="组合-聚合复用原则-db的Connect类"><a href="#组合-聚合复用原则-db的Connect类" class="headerlink" title="组合/聚合复用原则 db的Connect类"></a>组合/聚合复用原则 db的Connect类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">DBConnection</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> String <span class="title">getConnection</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MysqlConnection</span> <span class="keyword">extends</span> <span class="title">DBConnection</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getConnection</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"mysql数据库连接"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dao</span></span>&#123;</span><br><span class="line">    <span class="comment">// 可以通过set/构造方法注入</span></span><br><span class="line">    <span class="keyword">private</span> DBConnection dbConnection;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addProduct</span><span class="params">()</span></span>&#123;</span><br><span class="line">        String conn = dbConnection.getConnection();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="数据库设计原则"><a href="#数据库设计原则" class="headerlink" title="数据库设计原则"></a>数据库设计原则</h3><p>1 实体聚合原则<br>2 不用外键<br>3 减少中间表设计</p>
<p>Objcet 的源码</p>
<h3 id="Maven-报错No-plugin-found-for-prefix-‘tomcat7"><a href="#Maven-报错No-plugin-found-for-prefix-‘tomcat7" class="headerlink" title="Maven 报错No plugin found for prefix ‘tomcat7"></a>Maven 报错No plugin found for prefix ‘tomcat7</h3><p>找到Maven的setting：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">pluginGroups</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">pluginGroup</span>&gt;</span>org.apache.tomcat.maven<span class="tag">&lt;/<span class="name">pluginGroup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">pluginGroups</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="HTTP服务的性能测试图表"><a href="#HTTP服务的性能测试图表" class="headerlink" title="HTTP服务的性能测试图表"></a>HTTP服务的性能测试图表</h3><h3 id="snowflake"><a href="#snowflake" class="headerlink" title="snowflake"></a>snowflake</h3><h3 id="获取当前目录-System-getProperty-参数大全"><a href="#获取当前目录-System-getProperty-参数大全" class="headerlink" title="获取当前目录 System.getProperty()参数大全"></a>获取当前目录 System.getProperty()参数大全</h3><p><code>System.out.println(System.getProperty(&quot;user.dir&quot;));</code></p>
<h3 id="StringUtils源码学习"><a href="#StringUtils源码学习" class="headerlink" title="StringUtils源码学习"></a>StringUtils源码学习</h3><h3 id="forEach-反编译是迭代器"><a href="#forEach-反编译是迭代器" class="headerlink" title="forEach 反编译是迭代器"></a>forEach 反编译是迭代器</h3><h3 id="modCount在线程不安全的迭代器里会抛异常"><a href="#modCount在线程不安全的迭代器里会抛异常" class="headerlink" title="modCount在线程不安全的迭代器里会抛异常"></a>modCount在线程不安全的迭代器里会抛异常</h3><h3 id="UnsupportedOperationException"><a href="#UnsupportedOperationException" class="headerlink" title="UnsupportedOperationException"></a><code>UnsupportedOperationException</code></h3><blockquote>
<p>从Arrays.asList()转化过来的List的不支持add()和remove()方法，这是由于从Arrays.asList()返回的是返回java.util.Arrays$ArrayList，而不是ArrayList。Arrays$ArrayList和ArrayList都是继承AbstractList，add() 和remove()等方法在AbstractList中默认throw UnsupportedOperationException而不做任何操作。ArrayList重写这些方法对List进行操作，而Arrays$ArrayList却没有重写add()和 remove()等方法，所以对从Arrays.asList()转化过来的List进行add()和remove()会出现UnsupportedOperationException异常。</p>
</blockquote>
<p>Arrays.asList返回的是Arrays的内部类java.util.Arrays.ArrayList 该类继承了AbstractList但是并没有实现所有的方法，和java.util.ArrayList还是有区别的。 AbstractList的add方法：</p>
<p><code>res.add(new ArrayList&lt;&gt;(Arrays.asList(num[i],num[lo],num[hi])));</code></p>
<h3 id="求int-最大值的正确写法"><a href="#求int-最大值的正确写法" class="headerlink" title="求int[]最大值的正确写法"></a>求<code>int[]</code>最大值的正确写法</h3><p><code>int maxa = Arrays.stream(arr).max().getAsInt();</code></p>
<h3 id="List-remove的index不能是Integer"><a href="#List-remove的index不能是Integer" class="headerlink" title="List remove的index不能是Integer"></a>List remove的index不能是Integer</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (o == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; size; index++)</span><br><span class="line">            <span class="keyword">if</span> (elementData[index] == <span class="keyword">null</span>) &#123;</span><br><span class="line">                fastRemove(index);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; size; index++)</span><br><span class="line">            <span class="keyword">if</span> (o.equals(elementData[index])) &#123;</span><br><span class="line">                fastRemove(index);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="String的字典序比较"><a href="#String的字典序比较" class="headerlink" title="String的字典序比较"></a>String的字典序比较</h3><div><div class="fold_hider"><div class="close hider_title">展开代码</div></div><div class="fold">
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Compares two strings lexicographically.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * The comparison is based on the Unicode value of each character in</span></span><br><span class="line"><span class="comment"> * the strings. </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  The result is * a negative integer if this &#123;<span class="doctag">@code</span> String&#125; object</span></span><br><span class="line"><span class="comment"> * lexicographically precedes the argument string.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(String anotherString)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> len1 = value.length;</span><br><span class="line">    <span class="keyword">int</span> len2 = anotherString.value.length;</span><br><span class="line">    <span class="keyword">int</span> lim = Math.min(len1, len2);</span><br><span class="line">    <span class="keyword">char</span> v1[] = value;</span><br><span class="line">    <span class="keyword">char</span> v2[] = anotherString.value;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (k &lt; lim) &#123;</span><br><span class="line">        <span class="keyword">char</span> c1 = v1[k];</span><br><span class="line">        <span class="keyword">char</span> c2 = v2[k];</span><br><span class="line">        <span class="keyword">if</span> (c1 != c2) &#123;</span><br><span class="line">            <span class="keyword">return</span> c1 - c2;</span><br><span class="line">        &#125;</span><br><span class="line">        k++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> len1 - len2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div></div>
<h3 id="replace和replaceAll都是全部替换"><a href="#replace和replaceAll都是全部替换" class="headerlink" title="replace和replaceAll都是全部替换"></a>replace和replaceAll都是全部替换</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">replaceAll</span><span class="params">(String regex, String replacement)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Pattern.compile(regex).matcher(<span class="keyword">this</span>).replaceAll(replacement);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Replaces each substring of this string that matches the literal target</span></span><br><span class="line"><span class="comment"> * sequence with the specified literal replacement sequence. The</span></span><br><span class="line"><span class="comment"> * replacement proceeds from the beginning of the string to the end, for</span></span><br><span class="line"><span class="comment"> * example, replacing "aa" with "b" in the string "aaa" will result in</span></span><br><span class="line"><span class="comment"> * "ba" rather than "ab".</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  target The sequence of char values to be replaced</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  replacement The replacement sequence of char values</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>  The resulting string</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.5</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">replace</span><span class="params">(CharSequence target, CharSequence replacement)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Pattern.compile(target.toString(), Pattern.LITERAL).matcher(</span><br><span class="line">            <span class="keyword">this</span>).replaceAll(Matcher.quoteReplacement(replacement.toString()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="hashset的实现"><a href="#hashset的实现" class="headerlink" title="hashset的实现"></a>hashset的实现</h3><p><code>static final</code> 静态类对象 所有实例共享</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">transient</span> HashMap&lt;E,Object&gt; map;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Dummy value to associate with an Object in the backing Map</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object PRESENT = <span class="keyword">new</span> Object();</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> map.put(e, PRESENT)==<span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> map.remove(o)==PRESENT;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> Iterator&lt;E&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> map.keySet().iterator();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="二进制"><a href="#二进制" class="headerlink" title="二进制"></a>二进制</h3><p><code>System.out.println(0b101);</code>//二进制:5  （0b开头的）<br><code>System.out.println(011);</code> //八进制9</p>
<h3 id="List-lt-String-gt-2-String"><a href="#List-lt-String-gt-2-String" class="headerlink" title="List&lt;String&gt; 2 String[]"></a><code>List&lt;String&gt;</code> 2 <code>String[]</code></h3><blockquote>
<p>[Ljava.lang.Object; cannot be cast to [Ljava.lang.String;</p>
</blockquote>
<p><code>rst.toArray(new String[rst.size()]);</code></p>
<p><a href="http://wiki.jikexueyuan.com/project/java-enhancement/java-thirtysix.html" target="_blank" rel="noopener">http://wiki.jikexueyuan.com/project/java-enhancement/java-thirtysix.html</a></p>
<h3 id="二维数组clone"><a href="#二维数组clone" class="headerlink" title="二维数组clone"></a>二维数组clone</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.mat = <span class="keyword">new</span> <span class="keyword">int</span>[matrix.length][];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; matrix.length; i++) &#123;</span><br><span class="line">        <span class="keyword">this</span>.mat[i] = matrix[i].clone();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="ThreadLocal"><a href="#ThreadLocal" class="headerlink" title="ThreadLocal"></a>ThreadLocal</h3><h3 id="Timer"><a href="#Timer" class="headerlink" title="Timer"></a>Timer</h3><h3 id="打印整数的二进制表示"><a href="#打印整数的二进制表示" class="headerlink" title="打印整数的二进制表示"></a>打印整数的二进制表示</h3><p>0x8000000 表示100000…0</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a = -<span class="number">6</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;<span class="number">32</span>;i++)&#123;</span><br><span class="line">    <span class="comment">//取第一位，右移</span></span><br><span class="line">    <span class="keyword">int</span> t = (a&amp;<span class="number">0x8000000</span>&gt;&gt;&gt;i)&gt;&gt;&gt;(<span class="number">31</span>-i);</span><br><span class="line">    out(t);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="System-exit"><a href="#System-exit" class="headerlink" title="System.exit"></a>System.exit</h3><p>结束一个jvm。 状态0是正常退出<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//非零是异常</span></span><br><span class="line">by convention, a nonzero status code indicates abnormal termination.</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">exit</span><span class="params">(<span class="keyword">int</span> status)</span></span></span><br></pre></td></tr></table></figure></p>
<h3 id="forEach：-ConcurrentModificationException"><a href="#forEach：-ConcurrentModificationException" class="headerlink" title="forEach： ConcurrentModificationException"></a>forEach： ConcurrentModificationException</h3><p>报错代码：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(List&lt;Integer&gt; list :subsets) &#123;</span><br><span class="line">    List&lt;Integer&gt; before = <span class="keyword">new</span> ArrayList&lt;&gt;(list);</span><br><span class="line">    before.add(i);</span><br><span class="line">    <span class="comment">//subsets的大小在不断增加！终止不了</span></span><br><span class="line">    subsets.add(before);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:901)<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">checkForComodification</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (modCount != expectedModCount)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>Iterator 是工作在一个独立的线程中，并且拥有一个 mutex 锁。 Iterator 被创建之后会建立一个指向原来对象的单链索引表，当原来的对象数量发生变化时，这个索引表的内容不会同步改变，所以当索引指针往后移动的时候就找不到要迭代的对象，所以按照 fail-fast 原则 Iterator 会马上抛出 java.util.ConcurrentModificationException 异常。<br>所以 Iterator 在工作的时候是不允许被迭代的对象被改变的。</p>
</blockquote>
<blockquote>
<p>在使用迭代器遍历的时候，如果使用ArrayList中的remove(int index) remove(Object o) remove(int fromIndex ,int toIndex) add等方法的时候都会修改modCount，在迭代的时候需要保持单线程的唯一操作，如果期间进行了插入或者删除，就会被迭代器检查获知，从而出现运行时异常</p>
</blockquote>
<h3 id="被动加载和主动加载"><a href="#被动加载和主动加载" class="headerlink" title="被动加载和主动加载"></a>被动加载和主动加载</h3><p>final static List<dish> menu = Arrays.asList{}<br>import static A.menu;<br>A类不会被初始化 不会占用任何内存<br>去掉final变成主动加载</dish></p>
<h3 id="位运算取模只要5个CPU周期-至少26个CPU周期"><a href="#位运算取模只要5个CPU周期-至少26个CPU周期" class="headerlink" title="位运算取模只要5个CPU周期 %至少26个CPU周期"></a>位运算取模只要5个CPU周期 %至少26个CPU周期</h3><h3 id="Character"><a href="#Character" class="headerlink" title="Character"></a>Character</h3><ol>
<li>内部静态类做cache</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">CharacterCache</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">CharacterCache</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> Character cache[] = <span class="keyword">new</span> Character[<span class="number">127</span> + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cache.length; i++)</span><br><span class="line">            cache[i] = <span class="keyword">new</span> Character((<span class="keyword">char</span>)i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Character <span class="title">valueOf</span><span class="params">(<span class="keyword">char</span> c)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (c &lt;= <span class="number">127</span>) &#123; <span class="comment">// must cache</span></span><br><span class="line">        <span class="keyword">return</span> CharacterCache.cache[(<span class="keyword">int</span>)c];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Character(c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">digit</span><span class="params">(<span class="keyword">char</span> ch, <span class="keyword">int</span> radix)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> digit((<span class="keyword">int</span>)ch, radix);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>当radix基数大于传入的数字，返回-1，只能传入小于radix的数字</p>
<p><code>@FunctionalInterface</code>适合用lambda表达式</p>
<h3 id="JIN"><a href="#JIN" class="headerlink" title="JIN"></a>JIN</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">System.loadLibrary(<span class="string">"NativeMath"</span>);</span><br><span class="line"><span class="comment">//中的sqrt c++实现</span></span><br><span class="line">#include&lt;math.h&gt;</span><br><span class="line">JNIEXPORT jdouble JNICALL Java_包名_sqrt(JNIEnv *env,jobject obj,jdouble value)&#123;</span><br><span class="line">    <span class="keyword">return</span> sqrt(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="回调-控制反转-与代理"><a href="#回调-控制反转-与代理" class="headerlink" title="回调(控制反转)与代理"></a>回调(控制反转)与代理</h3><p>回调:<br><div><div class="fold_hider"><div class="close hider_title">展开代码</div></div><div class="fold">
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span>  <span class="title">ICallBack</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">callBack</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Caller</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(ICallBack callBack)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"start"</span>);</span><br><span class="line">        callBack.callBack();</span><br><span class="line">        System.out.println(<span class="string">"end"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">callbackk</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Caller call = <span class="keyword">new</span> Caller();</span><br><span class="line">        call.call(<span class="keyword">new</span> ICallBack() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">callBack</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">"这个叫回调"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

</div></div></p>
<p>线程Thread是回调者，Runnable回调接口<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable()&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).start();</span><br></pre></td></tr></table></figure></p>
<p>观察者模式/回调函数</p>
<h3 id="事件处理机制"><a href="#事件处理机制" class="headerlink" title="事件处理机制"></a>事件处理机制</h3><h3 id="RPC基于TCP-IP的会话层协议"><a href="#RPC基于TCP-IP的会话层协议" class="headerlink" title="RPC基于TCP/IP的会话层协议"></a>RPC基于TCP/IP的会话层协议</h3><p>set的contain时间复杂度是O(1),list的contain时间复杂度是O(n)<br>chrome的source根据域名不同存放资源 可以打断点调试</p>
<p>丢失精度一定要用<code>BigDecimal</code>的string构造器<br><code>devide(b,2,BigDecimal.Round_HALF_UP)</code>保留两位小数四舍五入<br>guaga:String-&gt;list<br><code>Splitter.on(&quot;,&quot;).splitToList(&quot;a,b,c&quot;);</code></p>
<h3 id="simditor"><a href="#simditor" class="headerlink" title="simditor"></a>simditor</h3><p><a href="https://blog.fondme.cn/apidoc/jdk-1.8-google/" target="_blank" rel="noopener">1.8中文API</a></p>
<ul>
<li>全文搜索引擎<a href="https://www.chedong.com/tech/lucene.html" target="_blank" rel="noopener">Lucene</a></li>
</ul>
<p><img src="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/access.jpg" alt="access.jpg"></p>
<h3 id="Charactor-isLetterOrDigit"><a href="#Charactor-isLetterOrDigit" class="headerlink" title="Charactor.isLetterOrDigit()"></a>Charactor.isLetterOrDigit()</h3><h3 id="MD5增加复杂度salt"><a href="#MD5增加复杂度salt" class="headerlink" title="MD5增加复杂度salt"></a>MD5增加复杂度salt</h3><h3 id="UUID"><a href="#UUID" class="headerlink" title="UUID"></a>UUID</h3><p>重置密码之前：验证完密码问题则写入token<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String Token = UUID.randomUUID().toString();</span><br><span class="line"><span class="comment">//放入本地缓存 防止空，放个前缀`token_`</span></span><br><span class="line">TokenCache.setKey(<span class="string">"token_"</span>+username,forgetToken);</span><br></pre></td></tr></table></figure></p>
<p>生成的是一个永远不会重复的字符串<br>把token放到本地cache中设置有效期</p>
<h4 id="Guava中的本地缓存LoadingCache"><a href="#Guava中的本地缓存LoadingCache" class="headerlink" title="Guava中的本地缓存LoadingCache"></a>Guava中的本地缓存<code>LoadingCache</code></h4><p>调用链模式没有顺序<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//TokenCache::</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> LoadingCache&lt;String,String&gt; localCache =</span><br><span class="line"> CacheBuilder.newBuilder()</span><br><span class="line"> .initialCapacity(<span class="number">1000</span>)<span class="comment">//缓存的初始化容量1000</span></span><br><span class="line"> .maximumSize(<span class="number">10000</span>)<span class="comment">//缓存的最大容量，超过则会使用LRU（最少使用）算法移除</span></span><br><span class="line"> .expireAfterAccess(<span class="number">12</span>,TimeUnit.HOURS)<span class="comment">//有效期12个小时</span></span><br><span class="line"> .build(<span class="keyword">new</span> CacheLoader&lt;String,String&gt;()&#123;</span><br><span class="line">    <span class="comment">//默认数据加载，调用get时，key没有命中，则调用这个</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">load</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="comment">//防空指针</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"null"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;);</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setKey</span><span class="params">(String key,String value)</span></span>&#123;</span><br><span class="line">    localCache.put(key,value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getKey</span><span class="params">(String key)</span></span>&#123;</span><br><span class="line">    String value = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">    value = localCache.get(key);</span><br><span class="line">    <span class="keyword">if</span>(<span class="string">"null"</span>.equals(value))<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">     <span class="keyword">return</span> value;</span><br><span class="line">    &#125;<span class="keyword">catch</span> (...)&#123;&#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="joda-time"><a href="#joda-time" class="headerlink" title="joda.time"></a>joda.time</h3><p>字符串-&gt;Date()<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DateTimeFormatter df = DateTimeFormat.forPattern(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line">DateTime dt = df.parseDateTime(<span class="string">"2015-04-20 2:2:2"</span>);</span><br><span class="line"><span class="keyword">return</span> dt.toDate();</span><br></pre></td></tr></table></figure></p>
<h3 id="CollectionUtils-isEmpty-List"><a href="#CollectionUtils-isEmpty-List" class="headerlink" title="CollectionUtils.isEmpty(List)"></a><code>CollectionUtils.isEmpty(List)</code></h3><h3 id="枚举：限制取值-封装响应编码ResponseCode"><a href="#枚举：限制取值-封装响应编码ResponseCode" class="headerlink" title="枚举：限制取值 封装响应编码ResponseCode"></a>枚举：限制取值 封装响应编码ResponseCode</h3><p>扩展的时候加枚举对象<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> ResponseCode &#123;</span><br><span class="line">    SUCCESS(<span class="number">0</span>,<span class="string">"SUCCESS"</span>),</span><br><span class="line">    ERROR(<span class="number">1</span>,<span class="string">"ERROR"</span>),</span><br><span class="line">    NEED_LOGIN(<span class="number">10</span>,<span class="string">"NEED_LOGIN"</span>),</span><br><span class="line">    ILLEGAL_ARGUMENT(<span class="number">2</span>,<span class="string">"ILLEGAL_ARGUMENT"</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> code;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String desc;</span><br><span class="line">    ResponseCode(<span class="keyword">int</span> code,String desc)&#123;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">        <span class="keyword">this</span>.desc = desc;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCode</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getDesc</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> desc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>用法 在response对象里：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@JsonIgnore</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isSuccess</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//0</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.status== ResponseCode.SUCCESS.getCode();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> color&#123;</span><br><span class="line">    <span class="comment">//枚举的3个实例化对象 外部不允许定义新的color对象</span></span><br><span class="line">    green,red,yellow</span><br><span class="line">&#125;</span><br><span class="line">color coenum;</span><br><span class="line">coenum = color.red;</span><br><span class="line">color[] values = color.values();</span><br></pre></td></tr></table></figure>
<h4 id="EnumSet"><a href="#EnumSet" class="headerlink" title="EnumSet"></a>EnumSet<color></color></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EnumSet&lt;color&gt; set = EnumSet.allOf(color.class);</span><br></pre></td></tr></table></figure>
<h4 id="EnumMap-lt-color-String-gt"><a href="#EnumMap-lt-color-String-gt" class="headerlink" title="EnumMap&lt;color,String&gt;"></a>EnumMap&lt;color,String&gt;</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">EnumMap&lt;color,String&gt; map = <span class="keyword">new</span> EnumMap&lt;color, String&gt;(color.class);</span><br><span class="line">map.put(color.red,<span class="string">"red"</span>);</span><br></pre></td></tr></table></figure>
<h4 id="构造方法（私有）"><a href="#构造方法（私有）" class="headerlink" title="构造方法（私有）"></a>构造方法（私有）</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> Color&#123;</span><br><span class="line">    red(<span class="number">10</span>),green(<span class="number">20</span>),yellow;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> color;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Color</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"无参构造器"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Color</span><span class="params">(<span class="keyword">int</span> color)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.color = color;</span><br><span class="line">        System.out.println(<span class="string">"有参构造器"</span>+color);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当用<code>Color.red</code>时，会调用3次构造器创建red,green,yellow三个对象</p>
<h3 id="实现接口添加方法"><a href="#实现接口添加方法" class="headerlink" title="实现接口添加方法"></a>实现接口添加方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getColor</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> color;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//输出0 Color.red.getColor输出10</span></span><br><span class="line">Color.yellow.getColor();</span><br></pre></td></tr></table></figure>
<p>也可以单独定义方法</p>
<h3 id="添加抽象方法，每个对象要都实现"><a href="#添加抽象方法，每个对象要都实现" class="headerlink" title="添加抽象方法，每个对象要都实现"></a>添加抽象方法，每个对象要都实现</h3><p><code>.getBytes(&#39;iso8859-1&#39;)</code>以iso编码读<br><code>new String(,&quot;gb2312&quot;)</code><br>静态代码块：用staitc声明，jvm加载类时执行，仅执行一次</p>
<p><code>printf(&quot;%n&quot;)</code>总是输出正确的平台特定行分隔符，所以它是跨平台的</p>
<h3 id="内部类"><a href="#内部类" class="headerlink" title="内部类"></a>内部类</h3><ol>
<li>方法内部类只能在方法内实例化，并且不能使用方法内的非final变量<br>方法结束局部变量弹栈，但内部类对象可能需要对象回收 比方法生命周期长。<br>用final在类加载会放入常量池，<br>jdk1.8开始不需要final 编译器自动final，所以不能改变</li>
<li>静态内部类 能使用外部类的静态成员和方法 不用new外部类也能访问</li>
<li>使用内部类可以使用多继承</li>
<li>优先选择静态内部类(防止内存泄漏)</li>
</ol>
<p>原因：因为java里传参是传值<br><img src="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/finalnoname.jpg" alt="finalnoname.jpg"><br>在里面引用外面的参数，外面的参数不应该被修改。不然里面变量和外面变量就会有二义性。<br>如果是传引用<br><img src="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/refnoname.jpg" alt="refnoname.jpg"><br>两个会同时修改不会有二义性</p>
<h3 id="适配器"><a href="#适配器" class="headerlink" title="适配器"></a>适配器</h3><p>安卓开发中常用，用A接口的子类转换B接口的子类</p>
<h3 id="代理模式与AOP"><a href="#代理模式与AOP" class="headerlink" title="代理模式与AOP"></a>代理模式与AOP</h3><p>与模板方法不同：代理是控制对象 模板是延迟到子类定义操作，定义骨架</p>
<h3 id="工厂方法模式："><a href="#工厂方法模式：" class="headerlink" title="工厂方法模式："></a>工厂方法模式：</h3><p>定义一个 <strong>创建对象的接口</strong><br>让类的实例化推迟到实现这个接口的子类中进行。<br>依赖注入</p>
<h3 id="策略模式和依赖倒置原则（面向接口编程）"><a href="#策略模式和依赖倒置原则（面向接口编程）" class="headerlink" title="策略模式和依赖倒置原则（面向接口编程）"></a>策略模式和依赖倒置原则（面向接口编程）</h3><h3 id="模板方法（设计模式）-权限管理-算法骨架"><a href="#模板方法（设计模式）-权限管理-算法骨架" class="headerlink" title="模板方法（设计模式） 权限管理 算法骨架"></a>模板方法（设计模式） 权限管理 算法骨架</h3><p>不改变算法的结构，重新定义算法的特定步骤<br><div><div class="fold_hider"><div class="close hider_title">展开代码</div></div><div class="fold">
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> javacoretest;</span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseManager</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">action</span><span class="params">(String username,String method)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">"admin"</span>.equals(username))&#123;</span><br><span class="line">            execute(method);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"没有权限"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(String Method)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//延迟到子类实现ClassManager...子类有不同的实现</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserManager</span> <span class="keyword">extends</span> <span class="title">BaseManager</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(String method)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">"add"</span>.equals(method)) System.out.println(<span class="string">"添加"</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">"del"</span>.equals(method)) System.out.println(<span class="string">"删除"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Templete</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        UserManager um = <span class="keyword">new</span> UserManager();</span><br><span class="line">        um.action(<span class="string">"admin"</span>,<span class="string">"add"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div></div></p>
<h3 id="MD5密码处理"><a href="#MD5密码处理" class="headerlink" title="MD5密码处理"></a>MD5密码处理</h3><div><div class="fold_hider"><div class="close hider_title">展开代码</div></div><div class="fold">
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> java.security.MessageDigest;</span><br><span class="line"><span class="keyword">import</span> java.security.NoSuchAlgorithmException;</span><br><span class="line"><span class="keyword">import</span> java.util.Base64;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MD5demo</span> </span>&#123;</span><br><span class="line">    <span class="comment">//数据库 所以密码只能重置不能查看</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String savePassWord =<span class="string">"pmq7VoTEWWLYh1ZPCDRujQ=="</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(login(<span class="string">"admin123456"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">login</span><span class="params">(String password)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(savePassWord.equals(md5(password)))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">md5</span><span class="params">(String password)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            MessageDigest md = MessageDigest.getInstance(<span class="string">"md5"</span>);</span><br><span class="line">            <span class="keyword">byte</span>[] bytes = md.digest(password.getBytes(<span class="string">"UTF-8"</span>));</span><br><span class="line">            String str = Base64.getEncoder().encodeToString(bytes);</span><br><span class="line">            <span class="keyword">return</span> str;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchAlgorithmException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div></div>
<h3 id="位运算应用"><a href="#位运算应用" class="headerlink" title="位运算应用"></a>位运算应用</h3><ol>
<li>判断奇偶：<code>a&amp;1 = 0</code> 偶数 <code>a&amp;1 = 1</code> 奇数</li>
<li><p>取模<code>a &amp; (2^n - 1)</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(<span class="number">999999</span>&amp;<span class="number">7</span>);</span><br><span class="line">System.out.println(<span class="number">999999</span>%<span class="number">8</span>);<span class="comment">//相等</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>&amp;00001111</code>是取get后4位</p>
</li>
<li><code>|00001111</code>是set后4位为1</li>
<li><code>^00001111</code>是翻转后4位</li>
</ol>
<h3 id="java8时间"><a href="#java8时间" class="headerlink" title="java8时间"></a>java8时间</h3><p>LocalDate LocalTime LocalDateTime</p>
<h3 id="国际化"><a href="#国际化" class="headerlink" title="国际化"></a>国际化</h3><p><code>ResourceBundle</code></p>
<p><code>simpledateformat</code>???</p>
<p><a href="https://blog.csdn.net/u013467442/article/details/40628121" target="_blank" rel="noopener">抗锯齿</a></p>
<h3 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h3><p>e.getMassage()<br>printStackTrace();调用堆栈</p>
<h3 id="char-和-byte"><a href="#char-和-byte" class="headerlink" title="char 和 byte"></a>char 和 byte</h3><ul>
<li>c++的char 8位，1字节。无byte。<code>typedef unsigned char byte;</code></li>
<li><p>java byte</p>
</li>
<li><p>静态方法没有this引用</p>
</li>
<li>包：保证类名的唯一性</li>
<li>工厂方法：返回一个类的新实例的静态方法</li>
</ul>
<h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><p>用Arraylist 因为内部管理数组，自动创建内部数组转移元素 扩容。</p>
<ul>
<li>泛型类，自动装箱、自动拆箱</li>
<li>new ArrayList&lt;&gt;(Arrays.asList()) //[]-&gt;ArrayList <code>asList</code>固定长度 不支持add</li>
</ul>
<h3 id="输入输出"><a href="#输入输出" class="headerlink" title="输入输出"></a>输入输出</h3><ol>
<li>int.next() 读取空格分割的单词</li>
<li>？？？？？读取密码用Console<blockquote>
<p><code>javaw</code> runs Java code without association with current terminal/console (which is useful for GUI applications),there is no associated console window System.console() returns null.空指针异常</p>
</blockquote>
</li>
<li>格式化字符串 System.out.printf(“%8.2f”,1000.0/3.0);</li>
</ol>
<ul>
<li>(Integer).intValue()</li>
<li>Object.clone()<br><code>protected native Object clone() throws CloneNotSupportedException;</code>浅拷贝，子类只能调用被保护的clone自己</li>
<li><code>Cloneable</code>接口是空的。<blockquote>
<p>实现了Cloneable只是标识 惯例重写Object.clone() 定义成public</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> A <span class="title">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException</span></span><br></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
<p>在没有实现Cloneable接口的实例上调用Object的clone方法会导致引发异常CloneNotSupportedException。</p>
<ul>
<li>标记接口（tagging interface): 空的。使用目的：可以用instanceof Cloneable检查</li>
<li>??enum toString的逆方法是valueOf</li>
<li>super不是对象的引用。不能赋值给对象变量，是只是编译器调用超类方法的关键字</li>
<li>sout(char[]) √<blockquote>
<p>char数组的打印有点特殊，int数组打印是打印出来一个地址，而char数组是打印数组里的内容。</p>
</blockquote>
</li>
</ul>
<blockquote>
<p>如果重写了equals方法，请一并重写hashCode方法</p>
<ul>
<li>重写类的equals方法-&gt;支持List</li>
<li>重写+hashCode方法-&gt;支持Set(HashMap,HashSet,LinkedHashMap,ConcurrentHashMap)</li>
<li>(obj <strong>instanceof</strong> Person)</li>
</ul>
</blockquote>
<ul>
<li>8种基本类型，其它都是对象（引用类型）-&gt; 包装类型</li>
</ul>
<table>
<thead>
<tr>
<th>整型</th>
<th>byte short int long</th>
</tr>
</thead>
<tbody>
<tr>
<td>浮点</td>
<td>float double</td>
</tr>
<tr>
<td>字符型</td>
<td>char</td>
</tr>
<tr>
<td>逻辑型</td>
<td>boolean</td>
</tr>
</tbody>
</table>
<ul>
<li>方法体里声明的基本数据类型在栈内存里</li>
<li>基本数据类型来说，赋值（=号）就相当于拷贝了一份值</li>
<li>当执行到new这个关键字，会在堆内存分配内存空间，并把该内存空间的地址赋值给arr1</li>
</ul>
<h4 id="注解-interface"><a href="#注解-interface" class="headerlink" title="注解 @interface"></a>注解 @interface</h4><h5 id="元注解"><a href="#元注解" class="headerlink" title="元注解"></a>元注解</h5><ul>
<li>注解只有一个成员，成员必须取名value（）</li>
<li>没有成员 标识注解</li>
<li>@Target（{}）作用域</li>
<li>@Retention（）生命周期</li>
<li>@Inherited 允许继承</li>
</ul>
<h4 id="Thread"><a href="#Thread" class="headerlink" title="Thread"></a>Thread</h4><p>线程共享 <code>*代码</code>和<code>数据空间</code><br>线程由独立的<code>运行栈</code>和<code>*程序计数器</code></p>
<h4 id="线程的概念模型"><a href="#线程的概念模型" class="headerlink" title="线程的概念模型"></a>线程的概念模型</h4><ul>
<li>虚拟cpu，在THREAD类中</li>
<li>将代码和数据传给thread类</li>
</ul>
<h4 id="线程体"><a href="#线程体" class="headerlink" title="线程体"></a>线程体</h4><p>方法run()中的代码</p>
<h4 id="构造线程的方法"><a href="#构造线程的方法" class="headerlink" title="构造线程的方法"></a>构造线程的方法</h4><ul>
<li><p>定义线程类，重写run方法，通过start启动</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">publc <span class="class"><span class="keyword">class</span> <span class="title">FactorialThreadTester</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"main thread starts"</span>);</span><br><span class="line">        FactorialThread thread = <span class="keyword">new</span> FactorialThread(<span class="number">10</span>);</span><br><span class="line">        thread.start();</span><br><span class="line">        System.out.println(<span class="string">"main thread ends"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>runable</p>
</li>
</ul>
<blockquote>
<p>主方法main中创建一个新线程会等main执行完后再new</p>
<ul>
<li>互斥锁 保证同一时刻有且只有一个线程在操作共享数据</li>
</ul>
</blockquote>
<h4 id="解决端口占用"><a href="#解决端口占用" class="headerlink" title="解决端口占用"></a>解决端口占用</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">netstat -ano | findstr 80 //列出进程极其占用的端口，且包含 80  </span><br><span class="line">tasklist | findstr 2000 //端口号</span><br><span class="line">taskkill -PID &lt;进程号&gt; -F //强制关闭某个进程</span><br></pre></td></tr></table></figure>
<hr>
<ol>
<li>HashMap 在并发执行 put 操作时会引起死循环，导致 CPU 利用率接近100%。因为多线程会导致 HashMap 的 Node 链表形成环形数据结构，一旦形成环形数据结构，Node 的 next 节点永远不为空，就会在获取 Node 时产生死循环。</li>
</ol>
<ul>
<li><strong><em>忽略序列化</em></strong>private <strong>transient</strong> String passwd;生命周期仅存于调用者的内存中而不会写到磁盘里持久化</li>
</ul>
<blockquote>
<ul>
<li>final变量经常和static关键字一起使用，作为常量</li>
<li>final也可以声明方法。方法前面加上final关键字，代表这个方法不可以被子类的方法重写，只能被继承</li>
<li>final的类无法被继承</li>
<li><code>public void setLength(final int size)</code>表示不能修改size的值 。对象则不能改变引用</li>
</ul>
</blockquote>
<p>类不能多继承，抽象类的方法可以不实现<br>接口可以多继承</p>
<ul>
<li>InterruptedException:</li>
</ul>
<h4 id="如何使HashMap线程安全的"><a href="#如何使HashMap线程安全的" class="headerlink" title="如何使HashMap线程安全的"></a>如何使HashMap线程安全的</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;,&gt; ht = <span class="keyword">new</span> Hashtable&lt;&gt;();</span><br><span class="line">Map&lt;,&gt; sy = <span class="keyword">new</span> Collections.synchronizedMap(<span class="keyword">new</span> HashMap&lt;,&gt;())</span><br><span class="line">Map&lt;,&gt; concurr = <span class="keyword">new</span> ConcurrentHashMap&lt;&gt;();</span><br></pre></td></tr></table></figure>
<p> <strong>CHM（ConcurrentHashMap)性能最佳*</strong></p>
<ul>
<li>Hashtable使用public <code>synchronized</code>阻塞，保证线程安全</li>
</ul>
<ul>
<li>.mf 是bean的JAR清单</li>
</ul>
<h4 id="迭代文件"><a href="#迭代文件" class="headerlink" title="迭代文件"></a>迭代文件</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>(DirectoryStream&lt;Path&gt; entries = files.newDirectoryStream(dir))&#123;</span><br><span class="line">	<span class="keyword">for</span>(Path entry : entries)&#123;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Map的方法"><a href="#Map的方法" class="headerlink" title="Map的方法"></a>Map的方法</h4><p>put putAll</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Native</span> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span>   MAX_VALUE = <span class="number">0x7fffffff</span>;</span><br></pre></td></tr></table></figure>
<p>0x7fffffff是补码表示的Integer的最小值(-2^31)和最大值(2^31-1),int是4字节。</p>
<ul>
<li>String内部是通过char数组表示，数组的长度在Java中限制为一个int型所能表示的最大值</li>
<li>最小值 Math.min(,)</li>
<li>substring(,)前闭后开</li>
</ul>
<blockquote>
<p>in-place 原地算法 删除重复元素 用!=略过并用unique的覆盖</p>
</blockquote>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/java/" rel="tag"># java</a>
          
            <a href="/tags/Thread/" rel="tag"># Thread</a>
          
            <a href="/tags/SpringBoot/" rel="tag"># SpringBoot</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/03/03/About-Vue/" rel="prev" title="About Vue&JS">
                About Vue&JS <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description">学习一个技术不要轻易过去，要有技术深度做一个demo</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">75</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">28</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#用静态工厂方法替代构造器"><span class="nav-number">1.</span> <span class="nav-text">用静态工厂方法替代构造器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#多个构造器参数"><span class="nav-number">2.</span> <span class="nav-text">多个构造器参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#0-1奇偶性"><span class="nav-number">3.</span> <span class="nav-text">0.1奇偶性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#0-3长整除"><span class="nav-number">4.</span> <span class="nav-text">0.3长整除</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#0-4-long字面量-一定要用大写L"><span class="nav-number">5.</span> <span class="nav-text">0.4 long字面量 一定要用大写L</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#0-5-十六进制int扩展成long的高位"><span class="nav-number">6.</span> <span class="nav-text">0.5 十六进制int扩展成long的高位</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#0-6-转型的零扩展和符号位扩展"><span class="nav-number">7.</span> <span class="nav-text">0.6 转型的零扩展和符号位扩展</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#0-7"><span class="nav-number">8.</span> <span class="nav-text">0.7</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建泛型数组"><span class="nav-number">9.</span> <span class="nav-text">创建泛型数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#toArray-new-String-0"><span class="nav-number">10.</span> <span class="nav-text">toArray(new String[0])</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BinarySearch"><span class="nav-number">11.</span> <span class="nav-text">BinarySearch</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#多态"><span class="nav-number">12.</span> <span class="nav-text">多态</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#序列化字段"><span class="nav-number">13.</span> <span class="nav-text">序列化字段</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#抽象类"><span class="nav-number">14.</span> <span class="nav-text">抽象类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#静态块构造块"><span class="nav-number">15.</span> <span class="nav-text">静态块构造块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IO用法"><span class="nav-number">16.</span> <span class="nav-text">IO用法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#case-没有break"><span class="nav-number">17.</span> <span class="nav-text">case 没有break</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#初始化"><span class="nav-number">18.</span> <span class="nav-text">初始化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#引用和值传递"><span class="nav-number">19.</span> <span class="nav-text">引用和值传递</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建对象"><span class="nav-number">20.</span> <span class="nav-text">创建对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#反编译"><span class="nav-number">21.</span> <span class="nav-text">反编译</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#PermGen-Space"><span class="nav-number">22.</span> <span class="nav-text">PermGen Space</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#强引用、软引用、弱引用、幻象引用"><span class="nav-number">23.</span> <span class="nav-text">强引用、软引用、弱引用、幻象引用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#SoftReference-软引用，缓存，配合引用队列"><span class="nav-number">23.1.</span> <span class="nav-text">SoftReference:软引用，缓存，配合引用队列</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#WeakReference：弱引用，配合引用队列"><span class="nav-number">23.2.</span> <span class="nav-text">WeakReference：弱引用，配合引用队列</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#幻象引用Phantom-：虚引用，GC的哨兵，必须和引用队列一起用"><span class="nav-number">23.3.</span> <span class="nav-text">幻象引用Phantom ：虚引用，GC的哨兵，必须和引用队列一起用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#引用队列-ReferenceQueue"><span class="nav-number">24.</span> <span class="nav-text">引用队列 ReferenceQueue</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#final、finally、-finalize"><span class="nav-number">25.</span> <span class="nav-text">final、finally、 finalize</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#final"><span class="nav-number">25.1.</span> <span class="nav-text">final</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#final-并不等同于-immutable"><span class="nav-number">25.1.1.</span> <span class="nav-text">final 并不等同于 immutable</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#finalize"><span class="nav-number">25.2.</span> <span class="nav-text">finalize</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#post-mortem"><span class="nav-number">25.3.</span> <span class="nav-text">post-mortem</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#幻象引用定制资源收集"><span class="nav-number">25.4.</span> <span class="nav-text">幻象引用定制资源收集</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#finally不会被执行的特例"><span class="nav-number">25.5.</span> <span class="nav-text">finally不会被执行的特例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Exception-Error-运行时异常"><span class="nav-number">26.</span> <span class="nav-text">Exception Error 运行时异常</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Throwable"><span class="nav-number">26.1.</span> <span class="nav-text">Throwable</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#已检查的异常"><span class="nav-number">26.2.</span> <span class="nav-text">已检查的异常</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#异常-Exception-和-Error"><span class="nav-number">26.3.</span> <span class="nav-text">异常 Exception 和 Error</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#chained-exception-facility-wrapped-exception"><span class="nav-number">26.4.</span> <span class="nav-text">chained exception facility wrapped exception</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#反应式编程（Reactive-Stream）"><span class="nav-number">26.5.</span> <span class="nav-text">反应式编程（Reactive Stream）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#生成闭区间-0-1-浮点数"><span class="nav-number">27.</span> <span class="nav-text">生成闭区间[0,1]浮点数?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Maven-目录隔离"><span class="nav-number">28.</span> <span class="nav-text">Maven 目录隔离</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Lombok：通过注解精简代码"><span class="nav-number">29.</span> <span class="nav-text">Lombok：通过注解精简代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#java-反编译"><span class="nav-number">30.</span> <span class="nav-text">java 反编译</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ajax复杂对象传递给spring-boot"><span class="nav-number">31.</span> <span class="nav-text">ajax复杂对象传递给spring boot</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Gson类中有泛型类的反射原理"><span class="nav-number">32.</span> <span class="nav-text">Gson类中有泛型类的反射原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JavaEE规范"><span class="nav-number">33.</span> <span class="nav-text">JavaEE规范</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设计模式"><span class="nav-number">34.</span> <span class="nav-text">设计模式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#里氏替换-长方形和正方形"><span class="nav-number">34.1.</span> <span class="nav-text">里氏替换 长方形和正方形</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#组合-聚合复用原则-db的Connect类"><span class="nav-number">34.2.</span> <span class="nav-text">组合/聚合复用原则 db的Connect类</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据库设计原则"><span class="nav-number">35.</span> <span class="nav-text">数据库设计原则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Maven-报错No-plugin-found-for-prefix-‘tomcat7"><span class="nav-number">36.</span> <span class="nav-text">Maven 报错No plugin found for prefix ‘tomcat7</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP服务的性能测试图表"><span class="nav-number">37.</span> <span class="nav-text">HTTP服务的性能测试图表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#snowflake"><span class="nav-number">38.</span> <span class="nav-text">snowflake</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取当前目录-System-getProperty-参数大全"><span class="nav-number">39.</span> <span class="nav-text">获取当前目录 System.getProperty()参数大全</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#StringUtils源码学习"><span class="nav-number">40.</span> <span class="nav-text">StringUtils源码学习</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#forEach-反编译是迭代器"><span class="nav-number">41.</span> <span class="nav-text">forEach 反编译是迭代器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#modCount在线程不安全的迭代器里会抛异常"><span class="nav-number">42.</span> <span class="nav-text">modCount在线程不安全的迭代器里会抛异常</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UnsupportedOperationException"><span class="nav-number">43.</span> <span class="nav-text">UnsupportedOperationException</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#求int-最大值的正确写法"><span class="nav-number">44.</span> <span class="nav-text">求int[]最大值的正确写法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#List-remove的index不能是Integer"><span class="nav-number">45.</span> <span class="nav-text">List remove的index不能是Integer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#String的字典序比较"><span class="nav-number">46.</span> <span class="nav-text">String的字典序比较</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#replace和replaceAll都是全部替换"><span class="nav-number">47.</span> <span class="nav-text">replace和replaceAll都是全部替换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#hashset的实现"><span class="nav-number">48.</span> <span class="nav-text">hashset的实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二进制"><span class="nav-number">49.</span> <span class="nav-text">二进制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#List-lt-String-gt-2-String"><span class="nav-number">50.</span> <span class="nav-text">List&lt;String&gt; 2 String[]</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二维数组clone"><span class="nav-number">51.</span> <span class="nav-text">二维数组clone</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ThreadLocal"><span class="nav-number">52.</span> <span class="nav-text">ThreadLocal</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Timer"><span class="nav-number">53.</span> <span class="nav-text">Timer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#打印整数的二进制表示"><span class="nav-number">54.</span> <span class="nav-text">打印整数的二进制表示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#System-exit"><span class="nav-number">55.</span> <span class="nav-text">System.exit</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#forEach：-ConcurrentModificationException"><span class="nav-number">56.</span> <span class="nav-text">forEach： ConcurrentModificationException</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#被动加载和主动加载"><span class="nav-number">57.</span> <span class="nav-text">被动加载和主动加载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#位运算取模只要5个CPU周期-至少26个CPU周期"><span class="nav-number">58.</span> <span class="nav-text">位运算取模只要5个CPU周期 %至少26个CPU周期</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Character"><span class="nav-number">59.</span> <span class="nav-text">Character</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JIN"><span class="nav-number">60.</span> <span class="nav-text">JIN</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#回调-控制反转-与代理"><span class="nav-number">61.</span> <span class="nav-text">回调(控制反转)与代理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#事件处理机制"><span class="nav-number">62.</span> <span class="nav-text">事件处理机制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RPC基于TCP-IP的会话层协议"><span class="nav-number">63.</span> <span class="nav-text">RPC基于TCP/IP的会话层协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#simditor"><span class="nav-number">64.</span> <span class="nav-text">simditor</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Charactor-isLetterOrDigit"><span class="nav-number">65.</span> <span class="nav-text">Charactor.isLetterOrDigit()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MD5增加复杂度salt"><span class="nav-number">66.</span> <span class="nav-text">MD5增加复杂度salt</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UUID"><span class="nav-number">67.</span> <span class="nav-text">UUID</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Guava中的本地缓存LoadingCache"><span class="nav-number">67.1.</span> <span class="nav-text">Guava中的本地缓存LoadingCache</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#joda-time"><span class="nav-number">68.</span> <span class="nav-text">joda.time</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CollectionUtils-isEmpty-List"><span class="nav-number">69.</span> <span class="nav-text">CollectionUtils.isEmpty(List)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#枚举：限制取值-封装响应编码ResponseCode"><span class="nav-number">70.</span> <span class="nav-text">枚举：限制取值 封装响应编码ResponseCode</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#EnumSet"><span class="nav-number">70.1.</span> <span class="nav-text">EnumSet</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#EnumMap-lt-color-String-gt"><span class="nav-number">70.2.</span> <span class="nav-text">EnumMap&lt;color,String&gt;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#构造方法（私有）"><span class="nav-number">70.3.</span> <span class="nav-text">构造方法（私有）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实现接口添加方法"><span class="nav-number">71.</span> <span class="nav-text">实现接口添加方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#添加抽象方法，每个对象要都实现"><span class="nav-number">72.</span> <span class="nav-text">添加抽象方法，每个对象要都实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#内部类"><span class="nav-number">73.</span> <span class="nav-text">内部类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#适配器"><span class="nav-number">74.</span> <span class="nav-text">适配器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#代理模式与AOP"><span class="nav-number">75.</span> <span class="nav-text">代理模式与AOP</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#工厂方法模式："><span class="nav-number">76.</span> <span class="nav-text">工厂方法模式：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#策略模式和依赖倒置原则（面向接口编程）"><span class="nav-number">77.</span> <span class="nav-text">策略模式和依赖倒置原则（面向接口编程）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#模板方法（设计模式）-权限管理-算法骨架"><span class="nav-number">78.</span> <span class="nav-text">模板方法（设计模式） 权限管理 算法骨架</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MD5密码处理"><span class="nav-number">79.</span> <span class="nav-text">MD5密码处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#位运算应用"><span class="nav-number">80.</span> <span class="nav-text">位运算应用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#java8时间"><span class="nav-number">81.</span> <span class="nav-text">java8时间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#国际化"><span class="nav-number">82.</span> <span class="nav-text">国际化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#异常"><span class="nav-number">83.</span> <span class="nav-text">异常</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#char-和-byte"><span class="nav-number">84.</span> <span class="nav-text">char 和 byte</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数组"><span class="nav-number">85.</span> <span class="nav-text">数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#输入输出"><span class="nav-number">86.</span> <span class="nav-text">输入输出</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#注解-interface"><span class="nav-number">86.1.</span> <span class="nav-text">注解 @interface</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#元注解"><span class="nav-number">86.1.1.</span> <span class="nav-text">元注解</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Thread"><span class="nav-number">86.2.</span> <span class="nav-text">Thread</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#线程的概念模型"><span class="nav-number">86.3.</span> <span class="nav-text">线程的概念模型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#线程体"><span class="nav-number">86.4.</span> <span class="nav-text">线程体</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#构造线程的方法"><span class="nav-number">86.5.</span> <span class="nav-text">构造线程的方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#解决端口占用"><span class="nav-number">86.6.</span> <span class="nav-text">解决端口占用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#如何使HashMap线程安全的"><span class="nav-number">86.7.</span> <span class="nav-text">如何使HashMap线程安全的</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#迭代文件"><span class="nav-number">86.8.</span> <span class="nav-text">迭代文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Map的方法"><span class="nav-number">86.9.</span> <span class="nav-text">Map的方法</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder"></span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/custom/custom.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
