<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
 
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="java,Thread,SpringBoot," />










<meta name="description" content="Maven 目录隔离Lombok：通过注解精简代码https://projectlombok.org/Lombok会把javac编译的AST放到Lombok Processor交给不同的Handler处理，输出修改AST，javac继续解析生成字节码文件。关键注解 of是白名单 exclude黑名单@Data(包括get/set/toString/EqualsAndHashCode) @Gette">
<meta name="keywords" content="java,Thread,SpringBoot">
<meta property="og:type" content="article">
<meta property="og:title" content="About Java">
<meta property="og:url" content="http://blog.iotaa.xyz/2018/03/02/About-Java/index.html">
<meta property="og:site_name" content="Learn &amp; practice">
<meta property="og:description" content="Maven 目录隔离Lombok：通过注解精简代码https://projectlombok.org/Lombok会把javac编译的AST放到Lombok Processor交给不同的Handler处理，输出修改AST，javac继续解析生成字节码文件。关键注解 of是白名单 exclude黑名单@Data(包括get/set/toString/EqualsAndHashCode) @Gette">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/javaobj.jpg">
<meta property="og:image" content="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/javarefer.jpg">
<meta property="og:image" content="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/javaarr.jpg">
<meta property="og:image" content="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/javastr.jpg">
<meta property="og:image" content="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/access.jpg">
<meta property="og:image" content="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/finalnoname.jpg">
<meta property="og:image" content="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/refnoname.jpg">
<meta property="og:updated_time" content="2018-12-03T14:16:34.437Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="About Java">
<meta name="twitter:description" content="Maven 目录隔离Lombok：通过注解精简代码https://projectlombok.org/Lombok会把javac编译的AST放到Lombok Processor交给不同的Handler处理，输出修改AST，javac继续解析生成字节码文件。关键注解 of是白名单 exclude黑名单@Data(包括get/set/toString/EqualsAndHashCode) @Gette">
<meta name="twitter:image" content="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/javaobj.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://blog.iotaa.xyz/2018/03/02/About-Java/"/>





  <title>About Java | Learn & practice</title>
  








  <!--prettify代码高亮脚本引入-->

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="top-scroll-bar"></div>
<div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Learn & practice</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.iotaa.xyz/2018/03/02/About-Java/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Learn & practice">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">About Java</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>

              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-02T21:18:51+08:00">
                2018-03-02
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2018-12-03T22:16:34+08:00">
                2018-12-03
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java源码8-netMVCspring-ioNetty-数据库-并发/" itemprop="url" rel="index">
                    <span itemprop="name">java源码8+netMVCspring+ioNetty+数据库+并发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="Maven-目录隔离"><a href="#Maven-目录隔离" class="headerlink" title="Maven 目录隔离"></a>Maven 目录隔离</h3><h3 id="Lombok：通过注解精简代码"><a href="#Lombok：通过注解精简代码" class="headerlink" title="Lombok：通过注解精简代码"></a>Lombok：通过注解精简代码</h3><p><a href="https://projectlombok.org/" target="_blank" rel="noopener">https://projectlombok.org/</a><br>Lombok会把javac编译的AST放到Lombok Processor交给不同的Handler处理，输出修改AST，javac继续解析生成字节码文件。<br>关键注解 of是白名单 exclude黑名单<br><code>@Data(包括get/set/toString/EqualsAndHashCode) @Getter @Setter</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@EqualsAndHashCode</span>(of = <span class="string">"id"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Category</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer parentId;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Boolean status;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer sortOrder;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Date updateTime;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>@NoArgsConstructor</code>无参构造器<br><code>@AllArgsConstructor</code>无参构造器<br><code>@ToString(exclude = &quot;column&quot;)</code><br><code>@EqualsAndHashCode(exclude = &quot;column&quot;)</code><br><code>@Sl4j @Log4j</code></p>
<h3 id="java-反编译"><a href="#java-反编译" class="headerlink" title="java 反编译"></a>java 反编译</h3><p><a href="http://jd.benow.ca/" target="_blank" rel="noopener">http://jd.benow.ca/</a></p>
<p>RESTful API 设计参考文献列表<br><a href="https://github.com/aisuhua/restful-api-design-references" target="_blank" rel="noopener">https://github.com/aisuhua/restful-api-design-references</a></p>
<h3 id="ajax复杂对象传递给spring-boot"><a href="#ajax复杂对象传递给spring-boot" class="headerlink" title="ajax复杂对象传递给spring boot"></a>ajax复杂对象传递给spring boot</h3><p>ajax里必须要<code>contentType:&quot;application/json;charset=utf-8&quot;</code>因为默认是<code>application/x-www-form-urlencoded</code></p>
<h3 id="Gson类中有泛型类的反射原理"><a href="#Gson类中有泛型类的反射原理" class="headerlink" title="Gson类中有泛型类的反射原理"></a>Gson类中有泛型类的反射原理</h3><h3 id="JavaEE规范"><a href="#JavaEE规范" class="headerlink" title="JavaEE规范"></a>JavaEE规范</h3><h3 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h3><h4 id="里氏替换-长方形和正方形"><a href="#里氏替换-长方形和正方形" class="headerlink" title="里氏替换 长方形和正方形"></a>里氏替换 长方形和正方形</h4><p>当把父类替换成子类，程序运行的和期望不一样。<br>如果正方形继承长方形，当对长方形的resize方法里有一个判断长宽是否相等的条件，正方形会死循环。<br>正确方法：长方形正方形都实现这个接口。注意没有set方法，所以长方形和正方形的resize是不通用的。写resize方法只能传入长方形类。防止继承泛滥。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Quadrangle</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">long</span> <span class="title">getWidth</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">long</span> <span class="title">getLength</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>子类重载父类方法，入参要比父类的入参更宽松！<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Child</span> <span class="keyword">extends</span> <span class="title">Base</span></span>&#123;</span><br><span class="line">    <span class="comment">// 重写</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">(HashMap map)</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.method(map);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 重载 比父类的入参更宽松 </span></span><br><span class="line">    <span class="comment">// 当使用Child.method(hashmap);的时候不会被调用</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">(Map map)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>后置条件：子类实现父类的抽象方法返回值要比父类更严格</p>
<h4 id="组合-聚合复用原则-db的Connect类"><a href="#组合-聚合复用原则-db的Connect类" class="headerlink" title="组合/聚合复用原则 db的Connect类"></a>组合/聚合复用原则 db的Connect类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">DBConnection</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> String <span class="title">getConnection</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MysqlConnection</span> <span class="keyword">extends</span> <span class="title">DBConnection</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getConnection</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"mysql数据库连接"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dao</span></span>&#123;</span><br><span class="line">    <span class="comment">// 可以通过set/构造方法注入</span></span><br><span class="line">    <span class="keyword">private</span> DBConnection dbConnection;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addProduct</span><span class="params">()</span></span>&#123;</span><br><span class="line">        String conn = dbConnection.getConnection();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="数据库设计原则"><a href="#数据库设计原则" class="headerlink" title="数据库设计原则"></a>数据库设计原则</h3><p>1 实体聚合原则<br>2 不用外键<br>3 减少中间表设计</p>
<p>Objcet 的源码</p>
<h3 id="Maven-报错No-plugin-found-for-prefix-‘tomcat7"><a href="#Maven-报错No-plugin-found-for-prefix-‘tomcat7" class="headerlink" title="Maven 报错No plugin found for prefix ‘tomcat7"></a>Maven 报错No plugin found for prefix ‘tomcat7</h3><p>找到Maven的setting：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">pluginGroups</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">pluginGroup</span>&gt;</span>org.apache.tomcat.maven<span class="tag">&lt;/<span class="name">pluginGroup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">pluginGroups</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="HTTP服务的性能测试图表"><a href="#HTTP服务的性能测试图表" class="headerlink" title="HTTP服务的性能测试图表"></a>HTTP服务的性能测试图表</h3><h3 id="snowflake"><a href="#snowflake" class="headerlink" title="snowflake"></a>snowflake</h3><h3 id="获取当前目录-System-getProperty-参数大全"><a href="#获取当前目录-System-getProperty-参数大全" class="headerlink" title="获取当前目录 System.getProperty()参数大全"></a>获取当前目录 System.getProperty()参数大全</h3><p><code>System.out.println(System.getProperty(&quot;user.dir&quot;));</code></p>
<h3 id="StringUtils源码学习"><a href="#StringUtils源码学习" class="headerlink" title="StringUtils源码学习"></a>StringUtils源码学习</h3><h3 id="forEach-反编译是迭代器"><a href="#forEach-反编译是迭代器" class="headerlink" title="forEach 反编译是迭代器"></a>forEach 反编译是迭代器</h3><h3 id="modCount在线程不安全的迭代器里会抛异常"><a href="#modCount在线程不安全的迭代器里会抛异常" class="headerlink" title="modCount在线程不安全的迭代器里会抛异常"></a>modCount在线程不安全的迭代器里会抛异常</h3><h3 id="UnsupportedOperationException"><a href="#UnsupportedOperationException" class="headerlink" title="UnsupportedOperationException"></a><code>UnsupportedOperationException</code></h3><blockquote>
<p>从Arrays.asList()转化过来的List的不支持add()和remove()方法，这是由于从Arrays.asList()返回的是返回java.util.Arrays$ArrayList，而不是ArrayList。Arrays$ArrayList和ArrayList都是继承AbstractList，add() 和remove()等方法在AbstractList中默认throw UnsupportedOperationException而不做任何操作。ArrayList重写这些方法对List进行操作，而Arrays$ArrayList却没有重写add()和 remove()等方法，所以对从Arrays.asList()转化过来的List进行add()和remove()会出现UnsupportedOperationException异常。</p>
</blockquote>
<p>Arrays.asList返回的是Arrays的内部类java.util.Arrays.ArrayList 该类继承了AbstractList但是并没有实现所有的方法，和java.util.ArrayList还是有区别的。 AbstractList的add方法：</p>
<p><code>res.add(new ArrayList&lt;&gt;(Arrays.asList(num[i],num[lo],num[hi])));</code></p>
<h3 id="求int-最大值的正确写法"><a href="#求int-最大值的正确写法" class="headerlink" title="求int[]最大值的正确写法"></a>求<code>int[]</code>最大值的正确写法</h3><p><code>int maxa = Arrays.stream(arr).max().getAsInt();</code></p>
<h3 id="List-remove的index不能是Integer"><a href="#List-remove的index不能是Integer" class="headerlink" title="List remove的index不能是Integer"></a>List remove的index不能是Integer</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (o == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; size; index++)</span><br><span class="line">            <span class="keyword">if</span> (elementData[index] == <span class="keyword">null</span>) &#123;</span><br><span class="line">                fastRemove(index);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> index = <span class="number">0</span>; index &lt; size; index++)</span><br><span class="line">            <span class="keyword">if</span> (o.equals(elementData[index])) &#123;</span><br><span class="line">                fastRemove(index);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="String的字典序比较"><a href="#String的字典序比较" class="headerlink" title="String的字典序比较"></a>String的字典序比较</h3><div><div class="fold_hider"><div class="close hider_title">展开代码</div></div><div class="fold">
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Compares two strings lexicographically.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * The comparison is based on the Unicode value of each character in</span></span><br><span class="line"><span class="comment"> * the strings. </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  The result is * a negative integer if this &#123;<span class="doctag">@code</span> String&#125; object</span></span><br><span class="line"><span class="comment"> * lexicographically precedes the argument string.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(String anotherString)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> len1 = value.length;</span><br><span class="line">    <span class="keyword">int</span> len2 = anotherString.value.length;</span><br><span class="line">    <span class="keyword">int</span> lim = Math.min(len1, len2);</span><br><span class="line">    <span class="keyword">char</span> v1[] = value;</span><br><span class="line">    <span class="keyword">char</span> v2[] = anotherString.value;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (k &lt; lim) &#123;</span><br><span class="line">        <span class="keyword">char</span> c1 = v1[k];</span><br><span class="line">        <span class="keyword">char</span> c2 = v2[k];</span><br><span class="line">        <span class="keyword">if</span> (c1 != c2) &#123;</span><br><span class="line">            <span class="keyword">return</span> c1 - c2;</span><br><span class="line">        &#125;</span><br><span class="line">        k++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> len1 - len2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div></div>
<h3 id="replace和replaceAll都是全部替换"><a href="#replace和replaceAll都是全部替换" class="headerlink" title="replace和replaceAll都是全部替换"></a>replace和replaceAll都是全部替换</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">replaceAll</span><span class="params">(String regex, String replacement)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Pattern.compile(regex).matcher(<span class="keyword">this</span>).replaceAll(replacement);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Replaces each substring of this string that matches the literal target</span></span><br><span class="line"><span class="comment"> * sequence with the specified literal replacement sequence. The</span></span><br><span class="line"><span class="comment"> * replacement proceeds from the beginning of the string to the end, for</span></span><br><span class="line"><span class="comment"> * example, replacing "aa" with "b" in the string "aaa" will result in</span></span><br><span class="line"><span class="comment"> * "ba" rather than "ab".</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  target The sequence of char values to be replaced</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  replacement The replacement sequence of char values</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>  The resulting string</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.5</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">replace</span><span class="params">(CharSequence target, CharSequence replacement)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Pattern.compile(target.toString(), Pattern.LITERAL).matcher(</span><br><span class="line">            <span class="keyword">this</span>).replaceAll(Matcher.quoteReplacement(replacement.toString()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="hashset的实现"><a href="#hashset的实现" class="headerlink" title="hashset的实现"></a>hashset的实现</h3><p><code>static final</code> 静态类对象 所有实例共享</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">transient</span> HashMap&lt;E,Object&gt; map;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Dummy value to associate with an Object in the backing Map</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object PRESENT = <span class="keyword">new</span> Object();</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> map.put(e, PRESENT)==<span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> map.remove(o)==PRESENT;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> Iterator&lt;E&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> map.keySet().iterator();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="二进制"><a href="#二进制" class="headerlink" title="二进制"></a>二进制</h3><p><code>System.out.println(0b101);</code>//二进制:5  （0b开头的）<br><code>System.out.println(011);</code> //八进制9</p>
<h3 id="List-lt-String-gt-2-String"><a href="#List-lt-String-gt-2-String" class="headerlink" title="List&lt;String&gt; 2 String[]"></a><code>List&lt;String&gt;</code> 2 <code>String[]</code></h3><blockquote>
<p>[Ljava.lang.Object; cannot be cast to [Ljava.lang.String;</p>
</blockquote>
<p><code>rst.toArray(new String[rst.size()]);</code></p>
<p><a href="http://wiki.jikexueyuan.com/project/java-enhancement/java-thirtysix.html" target="_blank" rel="noopener">http://wiki.jikexueyuan.com/project/java-enhancement/java-thirtysix.html</a></p>
<h3 id="二维数组clone"><a href="#二维数组clone" class="headerlink" title="二维数组clone"></a>二维数组clone</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.mat = <span class="keyword">new</span> <span class="keyword">int</span>[matrix.length][];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; matrix.length; i++) &#123;</span><br><span class="line">        <span class="keyword">this</span>.mat[i] = matrix[i].clone();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="ThreadLocal"><a href="#ThreadLocal" class="headerlink" title="ThreadLocal"></a>ThreadLocal</h3><h3 id="Timer"><a href="#Timer" class="headerlink" title="Timer"></a>Timer</h3><h3 id="对象头8字节"><a href="#对象头8字节" class="headerlink" title="对象头8字节"></a>对象头8字节</h3><p>前4保存对象hash(3)，锁状态(1)<br>后4存储对象所属类的引用。</p>
<p>数组还有4字节保存数组大小。</p>
<h3 id="java内存"><a href="#java内存" class="headerlink" title="java内存"></a>java内存</h3><p><a href="https://algs4.cs.princeton.edu/14analysis/" target="_blank" rel="noopener">https://algs4.cs.princeton.edu/14analysis/</a><br><a href="http://yueyemaitian.iteye.com/blog/2034305" target="_blank" rel="noopener">http://yueyemaitian.iteye.com/blog/2034305</a><br><a href="https://blog.csdn.net/zhxdick/article/details/52003123" target="_blank" rel="noopener">https://blog.csdn.net/zhxdick/article/details/52003123</a></p>
<h4 id="object"><a href="#object" class="headerlink" title="object"></a>object</h4><p>object overhead 16+int 4 padded到4的倍数(<code>-XX:-UseCompressedOops:</code>)<br>如果用压缩则<code>-XX:+UseCompressedOops: mark/4 + metedata/8 + 4 = 16</code><br>默认是启动压缩的<br><img src="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/javaobj.jpg" alt="javaobj.jpg"></p>
<blockquote>
<p>Objects. To determine the memory usage of an object, we add the amount of memory used by each instance variable to the overhead associated with each object, typically 16 bytes. Moreover, the memory usage is typically padded to be a multiple of 8 bytes (on a 64-bit machine).</p>
</blockquote>
<h4 id="padding"><a href="#padding" class="headerlink" title="padding"></a>padding</h4><p>This can waste some memory but it speeds up memory access and garbage collection.</p>
<h4 id="reference"><a href="#reference" class="headerlink" title="reference"></a>reference</h4><p>// todo<br>引用类型是内存地址，8字节<br>2*ref(8)+enclosing(8)+16head = 40<br>非静态有encolsing instance？<br>指针的大小在bit模式下或64bit开启指针压缩下默认为4byte<br> UseCompressOops开启和关闭，对对象头大小是有影响的，开启压缩，对象头是4+8=12byte；关闭压缩，对象头是8+8=16bytes。<br><code>java -Xmx31g -XX:+PrintFlagsFinal |findstr Compress</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">uintx CompressedClassSpaceSize     = 1073741824     &#123;product&#125;</span><br><span class="line">bool UseCompressedClassPointers    := true          &#123;lp64_product&#125;</span><br><span class="line">bool UseCompressedOops             := true          &#123;lp64_product&#125;</span><br></pre></td></tr></table></figure></p>
<p><img src="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/javarefer.jpg" alt="javarefer.jpg"></p>
<blockquote>
<p>References. A reference to an object typically is a memory address and thus uses 8 bytes of memory (on a 64-bit machine).</p>
</blockquote>
<h4 id="arrays"><a href="#arrays" class="headerlink" title="arrays"></a>arrays</h4><p><img src="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/javaarr.jpg" alt="javaarr.jpg"></p>
<blockquote>
<p>Arrays. Arrays in Java are implemented as objects, typically with extra overhead for the length. An array of primitive-type values typically requires 24 bytes of header information (16 bytes of object overhead, 4 bytes for the length, and 4 bytes of padding) plus the memory needed to store the values.</p>
</blockquote>
<p>基本类型 16的obj head+4(len)+4padding = 24 +存的类型*长度</p>
<h4 id="string"><a href="#string" class="headerlink" title="string"></a>string</h4><p>char[] ref(8)+int(4)+head(16)+padding-&gt;32+char<a href="arrayschar(24"></a>)=56+2N<br><img src="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/javastr.jpg" alt="javastr.jpg"></p>
<h3 id="打印整数的二进制表示"><a href="#打印整数的二进制表示" class="headerlink" title="打印整数的二进制表示"></a>打印整数的二进制表示</h3><p>0x8000000 表示100000…0</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a = -<span class="number">6</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;<span class="number">32</span>;i++)&#123;</span><br><span class="line">    <span class="comment">//取第一位，右移</span></span><br><span class="line">    <span class="keyword">int</span> t = (a&amp;<span class="number">0x8000000</span>&gt;&gt;&gt;i)&gt;&gt;&gt;(<span class="number">31</span>-i);</span><br><span class="line">    out(t);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="System-exit"><a href="#System-exit" class="headerlink" title="System.exit"></a>System.exit</h3><p>结束一个jvm。 状态0是正常退出<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//非零是异常</span></span><br><span class="line">by convention, a nonzero status code indicates abnormal termination.</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">exit</span><span class="params">(<span class="keyword">int</span> status)</span></span></span><br></pre></td></tr></table></figure></p>
<h3 id="forEach：-ConcurrentModificationException"><a href="#forEach：-ConcurrentModificationException" class="headerlink" title="forEach： ConcurrentModificationException"></a>forEach： ConcurrentModificationException</h3><p>报错代码：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(List&lt;Integer&gt; list :subsets) &#123;</span><br><span class="line">    List&lt;Integer&gt; before = <span class="keyword">new</span> ArrayList&lt;&gt;(list);</span><br><span class="line">    before.add(i);</span><br><span class="line">    <span class="comment">//subsets的大小在不断增加！终止不了</span></span><br><span class="line">    subsets.add(before);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:901)<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">checkForComodification</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (modCount != expectedModCount)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>Iterator 是工作在一个独立的线程中，并且拥有一个 mutex 锁。 Iterator 被创建之后会建立一个指向原来对象的单链索引表，当原来的对象数量发生变化时，这个索引表的内容不会同步改变，所以当索引指针往后移动的时候就找不到要迭代的对象，所以按照 fail-fast 原则 Iterator 会马上抛出 java.util.ConcurrentModificationException 异常。<br>所以 Iterator 在工作的时候是不允许被迭代的对象被改变的。</p>
</blockquote>
<blockquote>
<p>在使用迭代器遍历的时候，如果使用ArrayList中的remove(int index) remove(Object o) remove(int fromIndex ,int toIndex) add等方法的时候都会修改modCount，在迭代的时候需要保持单线程的唯一操作，如果期间进行了插入或者删除，就会被迭代器检查获知，从而出现运行时异常</p>
</blockquote>
<h3 id="被动加载和主动加载"><a href="#被动加载和主动加载" class="headerlink" title="被动加载和主动加载"></a>被动加载和主动加载</h3><p>final static List<dish> menu = Arrays.asList{}<br>import static A.menu;<br>A类不会被初始化 不会占用任何内存<br>去掉final变成主动加载</dish></p>
<h3 id="位运算取模只要5个CPU周期-至少26个CPU周期"><a href="#位运算取模只要5个CPU周期-至少26个CPU周期" class="headerlink" title="位运算取模只要5个CPU周期 %至少26个CPU周期"></a>位运算取模只要5个CPU周期 %至少26个CPU周期</h3><h3 id="Character"><a href="#Character" class="headerlink" title="Character"></a>Character</h3><ol>
<li>内部静态类做cache</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">CharacterCache</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">CharacterCache</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> Character cache[] = <span class="keyword">new</span> Character[<span class="number">127</span> + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cache.length; i++)</span><br><span class="line">            cache[i] = <span class="keyword">new</span> Character((<span class="keyword">char</span>)i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Character <span class="title">valueOf</span><span class="params">(<span class="keyword">char</span> c)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (c &lt;= <span class="number">127</span>) &#123; <span class="comment">// must cache</span></span><br><span class="line">        <span class="keyword">return</span> CharacterCache.cache[(<span class="keyword">int</span>)c];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Character(c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2.<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">digit</span><span class="params">(<span class="keyword">char</span> ch, <span class="keyword">int</span> radix)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> digit((<span class="keyword">int</span>)ch, radix);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>当radix基数大于传入的数字，返回-1，只能传入小于radix的数字</p>
<p><code>@FunctionalInterface</code>适合用lambda表达式</p>
<h3 id="JIN"><a href="#JIN" class="headerlink" title="JIN"></a>JIN</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">System.loadLibrary(<span class="string">"NativeMath"</span>);</span><br><span class="line"><span class="comment">//中的sqrt c++实现</span></span><br><span class="line">#include&lt;math.h&gt;</span><br><span class="line">JNIEXPORT jdouble JNICALL Java_包名_sqrt(JNIEnv *env,jobject obj,jdouble value)&#123;</span><br><span class="line">    <span class="keyword">return</span> sqrt(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="回调-控制反转-与代理"><a href="#回调-控制反转-与代理" class="headerlink" title="回调(控制反转)与代理"></a>回调(控制反转)与代理</h3><p>回调:<br><div><div class="fold_hider"><div class="close hider_title">展开代码</div></div><div class="fold">
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span>  <span class="title">ICallBack</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">callBack</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Caller</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">(ICallBack callBack)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"start"</span>);</span><br><span class="line">        callBack.callBack();</span><br><span class="line">        System.out.println(<span class="string">"end"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">callbackk</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Caller call = <span class="keyword">new</span> Caller();</span><br><span class="line">        call.call(<span class="keyword">new</span> ICallBack() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">callBack</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">"这个叫回调"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

</div></div></p>
<p>线程Thread是回调者，Runnable回调接口<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable()&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).start();</span><br></pre></td></tr></table></figure></p>
<p>观察者模式/回调函数</p>
<h3 id="事件处理机制"><a href="#事件处理机制" class="headerlink" title="事件处理机制"></a>事件处理机制</h3><h3 id="RPC基于TCP-IP的会话层协议"><a href="#RPC基于TCP-IP的会话层协议" class="headerlink" title="RPC基于TCP/IP的会话层协议"></a>RPC基于TCP/IP的会话层协议</h3><p>set的contain时间复杂度是O(1),list的contain时间复杂度是O(n)<br>chrome的source根据域名不同存放资源 可以打断点调试</p>
<p>丢失精度一定要用<code>BigDecimal</code>的string构造器<br><code>devide(b,2,BigDecimal.Round_HALF_UP)</code>保留两位小数四舍五入<br>guaga:String-&gt;list<br><code>Splitter.on(&quot;,&quot;).splitToList(&quot;a,b,c&quot;);</code></p>
<h3 id="simditor"><a href="#simditor" class="headerlink" title="simditor"></a>simditor</h3><p><a href="https://blog.fondme.cn/apidoc/jdk-1.8-google/" target="_blank" rel="noopener">1.8中文API</a></p>
<ul>
<li>全文搜索引擎<a href="https://www.chedong.com/tech/lucene.html" target="_blank" rel="noopener">Lucene</a></li>
</ul>
<p><img src="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/access.jpg" alt="access.jpg"></p>
<h3 id="Charactor-isLetterOrDigit"><a href="#Charactor-isLetterOrDigit" class="headerlink" title="Charactor.isLetterOrDigit()"></a>Charactor.isLetterOrDigit()</h3><h3 id="MD5增加复杂度salt"><a href="#MD5增加复杂度salt" class="headerlink" title="MD5增加复杂度salt"></a>MD5增加复杂度salt</h3><h3 id="UUID"><a href="#UUID" class="headerlink" title="UUID"></a>UUID</h3><p>重置密码之前：验证完密码问题则写入token<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String Token = UUID.randomUUID().toString();</span><br><span class="line"><span class="comment">//放入本地缓存 防止空，放个前缀`token_`</span></span><br><span class="line">TokenCache.setKey(<span class="string">"token_"</span>+username,forgetToken);</span><br></pre></td></tr></table></figure></p>
<p>生成的是一个永远不会重复的字符串<br>把token放到本地cache中设置有效期</p>
<h4 id="Guava中的本地缓存LoadingCache"><a href="#Guava中的本地缓存LoadingCache" class="headerlink" title="Guava中的本地缓存LoadingCache"></a>Guava中的本地缓存<code>LoadingCache</code></h4><p>调用链模式没有顺序<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//TokenCache::</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> LoadingCache&lt;String,String&gt; localCache =</span><br><span class="line"> CacheBuilder.newBuilder()</span><br><span class="line"> .initialCapacity(<span class="number">1000</span>)<span class="comment">//缓存的初始化容量1000</span></span><br><span class="line"> .maximumSize(<span class="number">10000</span>)<span class="comment">//缓存的最大容量，超过则会使用LRU（最少使用）算法移除</span></span><br><span class="line"> .expireAfterAccess(<span class="number">12</span>,TimeUnit.HOURS)<span class="comment">//有效期12个小时</span></span><br><span class="line"> .build(<span class="keyword">new</span> CacheLoader&lt;String,String&gt;()&#123;</span><br><span class="line">    <span class="comment">//默认数据加载，调用get时，key没有命中，则调用这个</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">load</span><span class="params">(String s)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="comment">//防空指针</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"null"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;);</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setKey</span><span class="params">(String key,String value)</span></span>&#123;</span><br><span class="line">    localCache.put(key,value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getKey</span><span class="params">(String key)</span></span>&#123;</span><br><span class="line">    String value = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">    value = localCache.get(key);</span><br><span class="line">    <span class="keyword">if</span>(<span class="string">"null"</span>.equals(value))<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">     <span class="keyword">return</span> value;</span><br><span class="line">    &#125;<span class="keyword">catch</span> (...)&#123;&#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="joda-time"><a href="#joda-time" class="headerlink" title="joda.time"></a>joda.time</h3><p>字符串-&gt;Date()<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DateTimeFormatter df = DateTimeFormat.forPattern(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line">DateTime dt = df.parseDateTime(<span class="string">"2015-04-20 2:2:2"</span>);</span><br><span class="line"><span class="keyword">return</span> dt.toDate();</span><br></pre></td></tr></table></figure></p>
<h3 id="CollectionUtils-isEmpty-List"><a href="#CollectionUtils-isEmpty-List" class="headerlink" title="CollectionUtils.isEmpty(List)"></a><code>CollectionUtils.isEmpty(List)</code></h3><h3 id="枚举：限制取值-封装响应编码ResponseCode"><a href="#枚举：限制取值-封装响应编码ResponseCode" class="headerlink" title="枚举：限制取值 封装响应编码ResponseCode"></a>枚举：限制取值 封装响应编码ResponseCode</h3><p>扩展的时候加枚举对象<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> ResponseCode &#123;</span><br><span class="line">    SUCCESS(<span class="number">0</span>,<span class="string">"SUCCESS"</span>),</span><br><span class="line">    ERROR(<span class="number">1</span>,<span class="string">"ERROR"</span>),</span><br><span class="line">    NEED_LOGIN(<span class="number">10</span>,<span class="string">"NEED_LOGIN"</span>),</span><br><span class="line">    ILLEGAL_ARGUMENT(<span class="number">2</span>,<span class="string">"ILLEGAL_ARGUMENT"</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> code;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String desc;</span><br><span class="line">    ResponseCode(<span class="keyword">int</span> code,String desc)&#123;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">        <span class="keyword">this</span>.desc = desc;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCode</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getDesc</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> desc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>用法 在response对象里：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@JsonIgnore</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isSuccess</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//0</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.status== ResponseCode.SUCCESS.getCode();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> color&#123;</span><br><span class="line">    <span class="comment">//枚举的3个实例化对象 外部不允许定义新的color对象</span></span><br><span class="line">    green,red,yellow</span><br><span class="line">&#125;</span><br><span class="line">color coenum;</span><br><span class="line">coenum = color.red;</span><br><span class="line">color[] values = color.values();</span><br></pre></td></tr></table></figure>
<h4 id="EnumSet"><a href="#EnumSet" class="headerlink" title="EnumSet"></a>EnumSet<color></color></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EnumSet&lt;color&gt; set = EnumSet.allOf(color.class);</span><br></pre></td></tr></table></figure>
<h4 id="EnumMap-lt-color-String-gt"><a href="#EnumMap-lt-color-String-gt" class="headerlink" title="EnumMap&lt;color,String&gt;"></a>EnumMap&lt;color,String&gt;</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">EnumMap&lt;color,String&gt; map = <span class="keyword">new</span> EnumMap&lt;color, String&gt;(color.class);</span><br><span class="line">map.put(color.red,<span class="string">"red"</span>);</span><br></pre></td></tr></table></figure>
<h4 id="构造方法（私有）"><a href="#构造方法（私有）" class="headerlink" title="构造方法（私有）"></a>构造方法（私有）</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> Color&#123;</span><br><span class="line">    red(<span class="number">10</span>),green(<span class="number">20</span>),yellow;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> color;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Color</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"无参构造器"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Color</span><span class="params">(<span class="keyword">int</span> color)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.color = color;</span><br><span class="line">        System.out.println(<span class="string">"有参构造器"</span>+color);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当用<code>Color.red</code>时，会调用3次构造器创建red,green,yellow三个对象</p>
<h3 id="实现接口添加方法"><a href="#实现接口添加方法" class="headerlink" title="实现接口添加方法"></a>实现接口添加方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getColor</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> color;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//输出0 Color.red.getColor输出10</span></span><br><span class="line">Color.yellow.getColor();</span><br></pre></td></tr></table></figure>
<p>也可以单独定义方法</p>
<h3 id="添加抽象方法，每个对象要都实现"><a href="#添加抽象方法，每个对象要都实现" class="headerlink" title="添加抽象方法，每个对象要都实现"></a>添加抽象方法，每个对象要都实现</h3><p><code>.getBytes(&#39;iso8859-1&#39;)</code>以iso编码读<br><code>new String(,&quot;gb2312&quot;)</code><br>静态代码块：用staitc声明，jvm加载类时执行，仅执行一次</p>
<p><code>printf(&quot;%n&quot;)</code>总是输出正确的平台特定行分隔符，所以它是跨平台的</p>
<h3 id="内部类"><a href="#内部类" class="headerlink" title="内部类"></a>内部类</h3><ol>
<li>方法内部类只能在方法内实例化，并且不能使用方法内的非final变量<br>方法结束局部变量弹栈，但内部类对象可能需要对象回收 比方法生命周期长。<br>用final在类加载会放入常量池，<br>jdk1.8开始不需要final 编译器自动final，所以不能改变</li>
<li>静态内部类 能使用外部类的静态成员和方法 不用new外部类也能访问</li>
<li>使用内部类可以使用多继承</li>
<li>优先选择静态内部类(防止内存泄漏)</li>
</ol>
<p>原因：因为java里传参是传值<br><img src="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/finalnoname.jpg" alt="finalnoname.jpg"><br>在里面引用外面的参数，外面的参数不应该被修改。不然里面变量和外面变量就会有二义性。<br>如果是传引用<br><img src="https://iota-1254040271.cos.ap-shanghai.myqcloud.com/image/refnoname.jpg" alt="refnoname.jpg"><br>两个会同时修改不会有二义性</p>
<h3 id="适配器"><a href="#适配器" class="headerlink" title="适配器"></a>适配器</h3><p>安卓开发中常用，用A接口的子类转换B接口的子类</p>
<h3 id="代理模式与AOP"><a href="#代理模式与AOP" class="headerlink" title="代理模式与AOP"></a>代理模式与AOP</h3><p>与模板方法不同：代理是控制对象 模板是延迟到子类定义操作，定义骨架</p>
<h3 id="工厂方法模式："><a href="#工厂方法模式：" class="headerlink" title="工厂方法模式："></a>工厂方法模式：</h3><p>定义一个 <strong>创建对象的接口</strong><br>让类的实例化推迟到实现这个接口的子类中进行。<br>依赖注入</p>
<h3 id="策略模式和依赖倒置原则（面向接口编程）"><a href="#策略模式和依赖倒置原则（面向接口编程）" class="headerlink" title="策略模式和依赖倒置原则（面向接口编程）"></a>策略模式和依赖倒置原则（面向接口编程）</h3><h3 id="模板方法（设计模式）-权限管理-算法骨架"><a href="#模板方法（设计模式）-权限管理-算法骨架" class="headerlink" title="模板方法（设计模式） 权限管理 算法骨架"></a>模板方法（设计模式） 权限管理 算法骨架</h3><p>不改变算法的结构，重新定义算法的特定步骤<br><div><div class="fold_hider"><div class="close hider_title">展开代码</div></div><div class="fold">
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> javacoretest;</span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseManager</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">action</span><span class="params">(String username,String method)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">"admin"</span>.equals(username))&#123;</span><br><span class="line">            execute(method);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"没有权限"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(String Method)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//延迟到子类实现ClassManager...子类有不同的实现</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserManager</span> <span class="keyword">extends</span> <span class="title">BaseManager</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(String method)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">"add"</span>.equals(method)) System.out.println(<span class="string">"添加"</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">"del"</span>.equals(method)) System.out.println(<span class="string">"删除"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Templete</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        UserManager um = <span class="keyword">new</span> UserManager();</span><br><span class="line">        um.action(<span class="string">"admin"</span>,<span class="string">"add"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div></div></p>
<h3 id="MD5密码处理"><a href="#MD5密码处理" class="headerlink" title="MD5密码处理"></a>MD5密码处理</h3><div><div class="fold_hider"><div class="close hider_title">展开代码</div></div><div class="fold">
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> java.security.MessageDigest;</span><br><span class="line"><span class="keyword">import</span> java.security.NoSuchAlgorithmException;</span><br><span class="line"><span class="keyword">import</span> java.util.Base64;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MD5demo</span> </span>&#123;</span><br><span class="line">    <span class="comment">//数据库 所以密码只能重置不能查看</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String savePassWord =<span class="string">"pmq7VoTEWWLYh1ZPCDRujQ=="</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(login(<span class="string">"admin123456"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">login</span><span class="params">(String password)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(savePassWord.equals(md5(password)))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">md5</span><span class="params">(String password)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            MessageDigest md = MessageDigest.getInstance(<span class="string">"md5"</span>);</span><br><span class="line">            <span class="keyword">byte</span>[] bytes = md.digest(password.getBytes(<span class="string">"UTF-8"</span>));</span><br><span class="line">            String str = Base64.getEncoder().encodeToString(bytes);</span><br><span class="line">            <span class="keyword">return</span> str;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchAlgorithmException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div></div>
<h3 id="位运算应用"><a href="#位运算应用" class="headerlink" title="位运算应用"></a>位运算应用</h3><ol>
<li>判断奇偶：<code>a&amp;1 = 0</code> 偶数 <code>a&amp;1 = 1</code> 奇数</li>
<li><p>取模<code>a &amp; (2^n - 1)</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(<span class="number">999999</span>&amp;<span class="number">7</span>);</span><br><span class="line">System.out.println(<span class="number">999999</span>%<span class="number">8</span>);<span class="comment">//相等</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>&amp;00001111</code>是取get后4位</p>
</li>
<li><code>|00001111</code>是set后4位为1</li>
<li><code>^00001111</code>是翻转后4位</li>
</ol>
<h3 id="java8时间"><a href="#java8时间" class="headerlink" title="java8时间"></a>java8时间</h3><p>LocalDate LocalTime LocalDateTime</p>
<h3 id="国际化"><a href="#国际化" class="headerlink" title="国际化"></a>国际化</h3><p><code>ResourceBundle</code></p>
<p><code>simpledateformat</code>???</p>
<p><a href="https://blog.csdn.net/u013467442/article/details/40628121" target="_blank" rel="noopener">抗锯齿</a></p>
<h3 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h3><p>e.getMassage()<br>printStackTrace();调用堆栈</p>
<h3 id="char-和-byte"><a href="#char-和-byte" class="headerlink" title="char 和 byte"></a>char 和 byte</h3><ul>
<li>c++的char 8位，1字节。无byte。<code>typedef unsigned char byte;</code></li>
<li><p>java byte</p>
</li>
<li><p>静态方法没有this引用</p>
</li>
<li>包：保证类名的唯一性</li>
<li>工厂方法：返回一个类的新实例的静态方法</li>
</ul>
<h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><p>用Arraylist 因为内部管理数组，自动创建内部数组转移元素 扩容。</p>
<ul>
<li>泛型类，自动装箱、自动拆箱</li>
<li>new ArrayList&lt;&gt;(Arrays.asList()) //[]-&gt;ArrayList <code>asList</code>固定长度 不支持add</li>
</ul>
<h3 id="输入输出"><a href="#输入输出" class="headerlink" title="输入输出"></a>输入输出</h3><ol>
<li>int.next() 读取空格分割的单词</li>
<li>？？？？？读取密码用Console<blockquote>
<p><code>javaw</code> runs Java code without association with current terminal/console (which is useful for GUI applications),there is no associated console window System.console() returns null.空指针异常</p>
</blockquote>
</li>
<li>格式化字符串 System.out.printf(“%8.2f”,1000.0/3.0);</li>
</ol>
<ul>
<li>(Integer).intValue()</li>
<li>Object.clone()<br><code>protected native Object clone() throws CloneNotSupportedException;</code>浅拷贝，子类只能调用被保护的clone自己</li>
<li><code>Cloneable</code>接口是空的。<blockquote>
<p>实现了Cloneable只是标识 惯例重写Object.clone() 定义成public</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> A <span class="title">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException</span></span><br></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
<p>在没有实现Cloneable接口的实例上调用Object的clone方法会导致引发异常CloneNotSupportedException。</p>
<ul>
<li>标记接口（tagging interface): 空的。使用目的：可以用instanceof Cloneable检查</li>
<li>??enum toString的逆方法是valueOf</li>
<li>super不是对象的引用。不能赋值给对象变量，是只是编译器调用超类方法的关键字</li>
<li>sout(char[]) √<blockquote>
<p>char数组的打印有点特殊，int数组打印是打印出来一个地址，而char数组是打印数组里的内容。</p>
</blockquote>
</li>
</ul>
<blockquote>
<p>如果重写了equals方法，请一并重写hashCode方法</p>
<ul>
<li>重写类的equals方法-&gt;支持List</li>
<li>重写+hashCode方法-&gt;支持Set(HashMap,HashSet,LinkedHashMap,ConcurrentHashMap)</li>
<li>(obj <strong>instanceof</strong> Person)</li>
</ul>
</blockquote>
<ul>
<li>8种基本类型，其它都是对象（引用类型）-&gt; 包装类型</li>
</ul>
<table>
<thead>
<tr>
<th>整型</th>
<th>byte short int long</th>
</tr>
</thead>
<tbody>
<tr>
<td>浮点</td>
<td>float double</td>
</tr>
<tr>
<td>字符型</td>
<td>char</td>
</tr>
<tr>
<td>逻辑型</td>
<td>boolean</td>
</tr>
</tbody>
</table>
<ul>
<li>方法体里声明的基本数据类型在栈内存里</li>
<li>基本数据类型来说，赋值（=号）就相当于拷贝了一份值</li>
<li>当执行到new这个关键字，会在堆内存分配内存空间，并把该内存空间的地址赋值给arr1</li>
</ul>
<h4 id="注解-interface"><a href="#注解-interface" class="headerlink" title="注解 @interface"></a>注解 @interface</h4><h5 id="元注解"><a href="#元注解" class="headerlink" title="元注解"></a>元注解</h5><ul>
<li>注解只有一个成员，成员必须取名value（）</li>
<li>没有成员 标识注解</li>
<li>@Target（{}）作用域</li>
<li>@Retention（）生命周期</li>
<li>@Inherited 允许继承</li>
</ul>
<h4 id="Thread"><a href="#Thread" class="headerlink" title="Thread"></a>Thread</h4><p>线程共享 <code>*代码</code>和<code>数据空间</code><br>线程由独立的<code>运行栈</code>和<code>*程序计数器</code></p>
<h4 id="线程的概念模型"><a href="#线程的概念模型" class="headerlink" title="线程的概念模型"></a>线程的概念模型</h4><ul>
<li>虚拟cpu，在THREAD类中</li>
<li>将代码和数据传给thread类</li>
</ul>
<h4 id="线程体"><a href="#线程体" class="headerlink" title="线程体"></a>线程体</h4><p>方法run()中的代码</p>
<h4 id="构造线程的方法"><a href="#构造线程的方法" class="headerlink" title="构造线程的方法"></a>构造线程的方法</h4><ul>
<li><p>定义线程类，重写run方法，通过start启动</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">publc <span class="class"><span class="keyword">class</span> <span class="title">FactorialThreadTester</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"main thread starts"</span>);</span><br><span class="line">        FactorialThread thread = <span class="keyword">new</span> FactorialThread(<span class="number">10</span>);</span><br><span class="line">        thread.start();</span><br><span class="line">        System.out.println(<span class="string">"main thread ends"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>runable</p>
</li>
</ul>
<blockquote>
<p>主方法main中创建一个新线程会等main执行完后再new</p>
<ul>
<li>互斥锁 保证同一时刻有且只有一个线程在操作共享数据</li>
</ul>
</blockquote>
<h4 id="解决端口占用"><a href="#解决端口占用" class="headerlink" title="解决端口占用"></a>解决端口占用</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">netstat -ano | findstr 80 //列出进程极其占用的端口，且包含 80  </span><br><span class="line">tasklist | findstr 2000 //端口号</span><br><span class="line">taskkill -PID &lt;进程号&gt; -F //强制关闭某个进程</span><br></pre></td></tr></table></figure>
<hr>
<ol>
<li>HashMap 在并发执行 put 操作时会引起死循环，导致 CPU 利用率接近100%。因为多线程会导致 HashMap 的 Node 链表形成环形数据结构，一旦形成环形数据结构，Node 的 next 节点永远不为空，就会在获取 Node 时产生死循环。</li>
</ol>
<ul>
<li><strong><em>忽略序列化</em></strong>private <strong>transient</strong> String passwd;生命周期仅存于调用者的内存中而不会写到磁盘里持久化</li>
</ul>
<blockquote>
<ul>
<li>final变量经常和static关键字一起使用，作为常量</li>
<li>final也可以声明方法。方法前面加上final关键字，代表这个方法不可以被子类的方法重写，只能被继承</li>
<li>final的类无法被继承</li>
<li><code>public void setLength(final int size)</code>表示不能修改size的值 。对象则不能改变引用</li>
</ul>
</blockquote>
<p>类不能多继承，抽象类的方法可以不实现<br>接口可以多继承</p>
<ul>
<li>InterruptedException:</li>
</ul>
<h4 id="如何使HashMap线程安全的"><a href="#如何使HashMap线程安全的" class="headerlink" title="如何使HashMap线程安全的"></a>如何使HashMap线程安全的</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;,&gt; ht = <span class="keyword">new</span> Hashtable&lt;&gt;();</span><br><span class="line">Map&lt;,&gt; sy = <span class="keyword">new</span> Collections.synchronizedMap(<span class="keyword">new</span> HashMap&lt;,&gt;())</span><br><span class="line">Map&lt;,&gt; concurr = <span class="keyword">new</span> ConcurrentHashMap&lt;&gt;();</span><br></pre></td></tr></table></figure>
<p> <strong>CHM（ConcurrentHashMap)性能最佳*</strong></p>
<ul>
<li>Hashtable使用public <code>synchronized</code>阻塞，保证线程安全</li>
</ul>
<ul>
<li>.mf 是bean的JAR清单</li>
</ul>
<h4 id="迭代文件"><a href="#迭代文件" class="headerlink" title="迭代文件"></a>迭代文件</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>(DirectoryStream&lt;Path&gt; entries = files.newDirectoryStream(dir))&#123;</span><br><span class="line">	<span class="keyword">for</span>(Path entry : entries)&#123;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Map的方法"><a href="#Map的方法" class="headerlink" title="Map的方法"></a>Map的方法</h4><p>put putAll</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Native</span> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span>   MAX_VALUE = <span class="number">0x7fffffff</span>;</span><br></pre></td></tr></table></figure>
<p>0x7fffffff是补码表示的Integer的最小值(-2^31)和最大值(2^31-1),int是4字节。</p>
<ul>
<li>String内部是通过char数组表示，数组的长度在Java中限制为一个int型所能表示的最大值</li>
<li>最小值 Math.min(,)</li>
<li>substring(,)前闭后开</li>
</ul>
<blockquote>
<p>in-place 原地算法 删除重复元素 用!=略过并用unique的覆盖</p>
</blockquote>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/java/" rel="tag"># java</a>
          
            <a href="/tags/Thread/" rel="tag"># Thread</a>
          
            <a href="/tags/SpringBoot/" rel="tag"># SpringBoot</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/03/03/About-Vue/" rel="prev" title="About Vue&JS">
                About Vue&JS <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description">学习一个技术不要轻易过去，要有技术深度做一个demo</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">69</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">24</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#Maven-目录隔离"><span class="nav-number">1.</span> <span class="nav-text">Maven 目录隔离</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Lombok：通过注解精简代码"><span class="nav-number">2.</span> <span class="nav-text">Lombok：通过注解精简代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#java-反编译"><span class="nav-number">3.</span> <span class="nav-text">java 反编译</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ajax复杂对象传递给spring-boot"><span class="nav-number">4.</span> <span class="nav-text">ajax复杂对象传递给spring boot</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Gson类中有泛型类的反射原理"><span class="nav-number">5.</span> <span class="nav-text">Gson类中有泛型类的反射原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JavaEE规范"><span class="nav-number">6.</span> <span class="nav-text">JavaEE规范</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设计模式"><span class="nav-number">7.</span> <span class="nav-text">设计模式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#里氏替换-长方形和正方形"><span class="nav-number">7.1.</span> <span class="nav-text">里氏替换 长方形和正方形</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#组合-聚合复用原则-db的Connect类"><span class="nav-number">7.2.</span> <span class="nav-text">组合/聚合复用原则 db的Connect类</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据库设计原则"><span class="nav-number">8.</span> <span class="nav-text">数据库设计原则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Maven-报错No-plugin-found-for-prefix-‘tomcat7"><span class="nav-number">9.</span> <span class="nav-text">Maven 报错No plugin found for prefix ‘tomcat7</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP服务的性能测试图表"><span class="nav-number">10.</span> <span class="nav-text">HTTP服务的性能测试图表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#snowflake"><span class="nav-number">11.</span> <span class="nav-text">snowflake</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取当前目录-System-getProperty-参数大全"><span class="nav-number">12.</span> <span class="nav-text">获取当前目录 System.getProperty()参数大全</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#StringUtils源码学习"><span class="nav-number">13.</span> <span class="nav-text">StringUtils源码学习</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#forEach-反编译是迭代器"><span class="nav-number">14.</span> <span class="nav-text">forEach 反编译是迭代器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#modCount在线程不安全的迭代器里会抛异常"><span class="nav-number">15.</span> <span class="nav-text">modCount在线程不安全的迭代器里会抛异常</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UnsupportedOperationException"><span class="nav-number">16.</span> <span class="nav-text">UnsupportedOperationException</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#求int-最大值的正确写法"><span class="nav-number">17.</span> <span class="nav-text">求int[]最大值的正确写法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#List-remove的index不能是Integer"><span class="nav-number">18.</span> <span class="nav-text">List remove的index不能是Integer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#String的字典序比较"><span class="nav-number">19.</span> <span class="nav-text">String的字典序比较</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#replace和replaceAll都是全部替换"><span class="nav-number">20.</span> <span class="nav-text">replace和replaceAll都是全部替换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#hashset的实现"><span class="nav-number">21.</span> <span class="nav-text">hashset的实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二进制"><span class="nav-number">22.</span> <span class="nav-text">二进制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#List-lt-String-gt-2-String"><span class="nav-number">23.</span> <span class="nav-text">List&lt;String&gt; 2 String[]</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二维数组clone"><span class="nav-number">24.</span> <span class="nav-text">二维数组clone</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ThreadLocal"><span class="nav-number">25.</span> <span class="nav-text">ThreadLocal</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Timer"><span class="nav-number">26.</span> <span class="nav-text">Timer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#对象头8字节"><span class="nav-number">27.</span> <span class="nav-text">对象头8字节</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#java内存"><span class="nav-number">28.</span> <span class="nav-text">java内存</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#object"><span class="nav-number">28.1.</span> <span class="nav-text">object</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#padding"><span class="nav-number">28.2.</span> <span class="nav-text">padding</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#reference"><span class="nav-number">28.3.</span> <span class="nav-text">reference</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#arrays"><span class="nav-number">28.4.</span> <span class="nav-text">arrays</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#string"><span class="nav-number">28.5.</span> <span class="nav-text">string</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#打印整数的二进制表示"><span class="nav-number">29.</span> <span class="nav-text">打印整数的二进制表示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#System-exit"><span class="nav-number">30.</span> <span class="nav-text">System.exit</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#forEach：-ConcurrentModificationException"><span class="nav-number">31.</span> <span class="nav-text">forEach： ConcurrentModificationException</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#被动加载和主动加载"><span class="nav-number">32.</span> <span class="nav-text">被动加载和主动加载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#位运算取模只要5个CPU周期-至少26个CPU周期"><span class="nav-number">33.</span> <span class="nav-text">位运算取模只要5个CPU周期 %至少26个CPU周期</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Character"><span class="nav-number">34.</span> <span class="nav-text">Character</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JIN"><span class="nav-number">35.</span> <span class="nav-text">JIN</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#回调-控制反转-与代理"><span class="nav-number">36.</span> <span class="nav-text">回调(控制反转)与代理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#事件处理机制"><span class="nav-number">37.</span> <span class="nav-text">事件处理机制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RPC基于TCP-IP的会话层协议"><span class="nav-number">38.</span> <span class="nav-text">RPC基于TCP/IP的会话层协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#simditor"><span class="nav-number">39.</span> <span class="nav-text">simditor</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Charactor-isLetterOrDigit"><span class="nav-number">40.</span> <span class="nav-text">Charactor.isLetterOrDigit()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MD5增加复杂度salt"><span class="nav-number">41.</span> <span class="nav-text">MD5增加复杂度salt</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UUID"><span class="nav-number">42.</span> <span class="nav-text">UUID</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Guava中的本地缓存LoadingCache"><span class="nav-number">42.1.</span> <span class="nav-text">Guava中的本地缓存LoadingCache</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#joda-time"><span class="nav-number">43.</span> <span class="nav-text">joda.time</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CollectionUtils-isEmpty-List"><span class="nav-number">44.</span> <span class="nav-text">CollectionUtils.isEmpty(List)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#枚举：限制取值-封装响应编码ResponseCode"><span class="nav-number">45.</span> <span class="nav-text">枚举：限制取值 封装响应编码ResponseCode</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#EnumSet"><span class="nav-number">45.1.</span> <span class="nav-text">EnumSet</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#EnumMap-lt-color-String-gt"><span class="nav-number">45.2.</span> <span class="nav-text">EnumMap&lt;color,String&gt;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#构造方法（私有）"><span class="nav-number">45.3.</span> <span class="nav-text">构造方法（私有）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实现接口添加方法"><span class="nav-number">46.</span> <span class="nav-text">实现接口添加方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#添加抽象方法，每个对象要都实现"><span class="nav-number">47.</span> <span class="nav-text">添加抽象方法，每个对象要都实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#内部类"><span class="nav-number">48.</span> <span class="nav-text">内部类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#适配器"><span class="nav-number">49.</span> <span class="nav-text">适配器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#代理模式与AOP"><span class="nav-number">50.</span> <span class="nav-text">代理模式与AOP</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#工厂方法模式："><span class="nav-number">51.</span> <span class="nav-text">工厂方法模式：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#策略模式和依赖倒置原则（面向接口编程）"><span class="nav-number">52.</span> <span class="nav-text">策略模式和依赖倒置原则（面向接口编程）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#模板方法（设计模式）-权限管理-算法骨架"><span class="nav-number">53.</span> <span class="nav-text">模板方法（设计模式） 权限管理 算法骨架</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MD5密码处理"><span class="nav-number">54.</span> <span class="nav-text">MD5密码处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#位运算应用"><span class="nav-number">55.</span> <span class="nav-text">位运算应用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#java8时间"><span class="nav-number">56.</span> <span class="nav-text">java8时间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#国际化"><span class="nav-number">57.</span> <span class="nav-text">国际化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#异常"><span class="nav-number">58.</span> <span class="nav-text">异常</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#char-和-byte"><span class="nav-number">59.</span> <span class="nav-text">char 和 byte</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数组"><span class="nav-number">60.</span> <span class="nav-text">数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#输入输出"><span class="nav-number">61.</span> <span class="nav-text">输入输出</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#注解-interface"><span class="nav-number">61.1.</span> <span class="nav-text">注解 @interface</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#元注解"><span class="nav-number">61.1.1.</span> <span class="nav-text">元注解</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Thread"><span class="nav-number">61.2.</span> <span class="nav-text">Thread</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#线程的概念模型"><span class="nav-number">61.3.</span> <span class="nav-text">线程的概念模型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#线程体"><span class="nav-number">61.4.</span> <span class="nav-text">线程体</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#构造线程的方法"><span class="nav-number">61.5.</span> <span class="nav-text">构造线程的方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#解决端口占用"><span class="nav-number">61.6.</span> <span class="nav-text">解决端口占用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#如何使HashMap线程安全的"><span class="nav-number">61.7.</span> <span class="nav-text">如何使HashMap线程安全的</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#迭代文件"><span class="nav-number">61.8.</span> <span class="nav-text">迭代文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Map的方法"><span class="nav-number">61.9.</span> <span class="nav-text">Map的方法</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder"></span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/custom/custom.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
